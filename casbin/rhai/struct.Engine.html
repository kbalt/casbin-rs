<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Rhai main scripting engine."><meta name="keywords" content="rust, rustlang, rust-lang, Engine"><title>Engine in casbin::rhai - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../casbin/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../casbin/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Engine</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#implementations">Methods</a></h3><ul><li><a href="#method.allow_if_expression">allow_if_expression</a></li><li><a href="#method.allow_looping">allow_looping</a></li><li><a href="#method.allow_shadowing">allow_shadowing</a></li><li><a href="#method.allow_statement_expression">allow_statement_expression</a></li><li><a href="#method.allow_switch_expression">allow_switch_expression</a></li><li><a href="#method.compile">compile</a></li><li><a href="#method.compile_expression">compile_expression</a></li><li><a href="#method.compile_expression_with_scope">compile_expression_with_scope</a></li><li><a href="#method.compile_file">compile_file</a></li><li><a href="#method.compile_file_with_scope">compile_file_with_scope</a></li><li><a href="#method.compile_scripts_with_scope">compile_scripts_with_scope</a></li><li><a href="#method.compile_with_scope">compile_with_scope</a></li><li><a href="#method.const_empty_string">const_empty_string</a></li><li><a href="#method.consume">consume</a></li><li><a href="#method.consume_ast">consume_ast</a></li><li><a href="#method.consume_ast_with_scope">consume_ast_with_scope</a></li><li><a href="#method.consume_file">consume_file</a></li><li><a href="#method.consume_file_with_scope">consume_file_with_scope</a></li><li><a href="#method.consume_with_scope">consume_with_scope</a></li><li><a href="#method.disable_symbol">disable_symbol</a></li><li><a href="#method.eval">eval</a></li><li><a href="#method.eval_ast">eval_ast</a></li><li><a href="#method.eval_ast_with_scope">eval_ast_with_scope</a></li><li><a href="#method.eval_expression">eval_expression</a></li><li><a href="#method.eval_expression_with_scope">eval_expression_with_scope</a></li><li><a href="#method.eval_file">eval_file</a></li><li><a href="#method.eval_file_with_scope">eval_file_with_scope</a></li><li><a href="#method.eval_with_scope">eval_with_scope</a></li><li><a href="#method.fail_on_invalid_map_property">fail_on_invalid_map_property</a></li><li><a href="#method.map_type_name">map_type_name</a></li><li><a href="#method.new">new</a></li><li><a href="#method.new_raw">new_raw</a></li><li><a href="#method.on_debug">on_debug</a></li><li><a href="#method.on_def_var">on_def_var</a></li><li><a href="#method.on_print">on_print</a></li><li><a href="#method.on_var">on_var</a></li><li><a href="#method.parse_json">parse_json</a></li><li><a href="#method.register_custom_operator">register_custom_operator</a></li><li><a href="#method.register_custom_syntax">register_custom_syntax</a></li><li><a href="#method.register_custom_syntax_raw">register_custom_syntax_raw</a></li><li><a href="#method.register_fn">register_fn</a></li><li><a href="#method.register_get">register_get</a></li><li><a href="#method.register_get_result">register_get_result</a></li><li><a href="#method.register_get_set">register_get_set</a></li><li><a href="#method.register_global_module">register_global_module</a></li><li><a href="#method.register_indexer_get">register_indexer_get</a></li><li><a href="#method.register_indexer_get_result">register_indexer_get_result</a></li><li><a href="#method.register_indexer_get_set">register_indexer_get_set</a></li><li><a href="#method.register_indexer_set">register_indexer_set</a></li><li><a href="#method.register_indexer_set_result">register_indexer_set_result</a></li><li><a href="#method.register_iterator">register_iterator</a></li><li><a href="#method.register_raw_fn">register_raw_fn</a></li><li><a href="#method.register_result_fn">register_result_fn</a></li><li><a href="#method.register_set">register_set</a></li><li><a href="#method.register_set_result">register_set_result</a></li><li><a href="#method.register_type">register_type</a></li><li><a href="#method.register_type_with_name">register_type_with_name</a></li><li><a href="#method.register_type_with_name_raw">register_type_with_name_raw</a></li><li><a href="#method.run">run</a></li><li><a href="#method.run_ast">run_ast</a></li><li><a href="#method.run_ast_with_scope">run_ast_with_scope</a></li><li><a href="#method.run_file">run_file</a></li><li><a href="#method.run_file_with_scope">run_file_with_scope</a></li><li><a href="#method.run_with_scope">run_with_scope</a></li><li><a href="#method.set_allow_if_expression">set_allow_if_expression</a></li><li><a href="#method.set_allow_looping">set_allow_looping</a></li><li><a href="#method.set_allow_shadowing">set_allow_shadowing</a></li><li><a href="#method.set_allow_statement_expression">set_allow_statement_expression</a></li><li><a href="#method.set_allow_switch_expression">set_allow_switch_expression</a></li><li><a href="#method.set_fail_on_invalid_map_property">set_fail_on_invalid_map_property</a></li><li><a href="#method.set_strict_variables">set_strict_variables</a></li><li><a href="#method.strict_variables">strict_variables</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#trait-implementations">Trait Implementations</a></h3><ul><li><a href="#impl-Debug">Debug</a></li><li><a href="#impl-Default">Default</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul><li><a href="#impl-RefUnwindSafe">!RefUnwindSafe</a></li><li><a href="#impl-Send">Send</a></li><li><a href="#impl-Sync">Sync</a></li><li><a href="#impl-Unpin">Unpin</a></li><li><a href="#impl-UnwindSafe">!UnwindSafe</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#blanket-implementations">Blanket Implementations</a></h3><ul><li><a href="#impl-Any">Any</a></li><li><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a></li><li><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a></li></ul></div></section><h2 class="location"><a href="index.html">In casbin::rhai</a></h2><div id="sidebar-vars" data-name="Engine" data-ty="struct" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../casbin/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Struct <a href="../index.html">casbin</a>::<wbr><a href="index.html">rhai</a>::<wbr><a class="struct" href="#">Engine</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust struct"><code>pub struct Engine { /* private fields */ }</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Rhai main scripting engine.</p>
<h2 id="thread-safety"><a href="#thread-safety">Thread Safety</a></h2>
<p><a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a> is re-entrant.</p>
<p>Currently, <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a> is neither <a href="https://doc.rust-lang.org/1.60.0/core/marker/trait.Send.html" title="Send"><code>Send</code></a> nor <a href="https://doc.rust-lang.org/1.60.0/core/marker/trait.Sync.html" title="Sync"><code>Sync</code></a>.
Use the <code>sync</code> feature to make it <a href="https://doc.rust-lang.org/1.60.0/core/marker/trait.Send.html" title="Send"><code>Send</code></a> <code>+</code> <a href="https://doc.rust-lang.org/1.60.0/core/marker/trait.Sync.html" title="Sync"><code>Sync</code></a>.</p>
<h2 id="example"><a href="#example">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;40 + 2&quot;</span>)<span class="question-mark">?</span>;

<span class="macro">println!</span>(<span class="string">&quot;Answer: {}&quot;</span>, <span class="ident">result</span>);  <span class="comment">// prints 42</span></code></pre></div>
</div></details><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor"></a></h2><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl" class="impl has-srclink"><a href="#impl" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.map_type_name" class="method has-srclink"><a href="#method.map_type_name" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.map_type_name" class="fnname">map_type_name</a>(&amp;'a self, name: &amp;'a <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>) -&gt; &amp;'a <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a></h4></section></summary><div class="docblock"><p>Pretty-print a type name.</p>
<p>If a type is registered via <a href="plugin/struct.Engine.html#method.register_type_with_name" title="Engine::register_type_with_name"><code>register_type_with_name</code></a>,
the type name provided for the registration will be used.</p>
<h5 id="panics"><a href="#panics">Panics</a></h5>
<p>Panics if the type name is <code>&amp;mut</code>.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-1" class="impl has-srclink"><a href="#impl-1" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.eval" class="method has-srclink"><a href="#method.eval" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.eval" class="fnname">eval</a>&lt;T&gt;(&amp;self, script: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Evaluate a string.</p>
<h5 id="example-1"><a href="#example-1">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;40 + 2&quot;</span>)<span class="question-mark">?</span>, <span class="number">42</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.eval_with_scope" class="method has-srclink"><a href="#method.eval_with_scope" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.eval_with_scope" class="fnname">eval_with_scope</a>&lt;T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;mut <a class="struct" href="struct.Scope.html" title="struct casbin::rhai::Scope">Scope</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;script: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Evaluate a string with own scope.</p>
<h6 id="constants-propagation"><a href="#constants-propagation">Constants Propagation</a></h6>
<p>If not [<code>OptimizationLevel::None</code>][crate::OptimizationLevel::None], constants defined within
the scope are propagated throughout the script <em>including</em> functions.</p>
<p>This allows functions to be optimized based on dynamic global constants.</p>
<h5 id="example-2"><a href="#example-2">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai</span>::{<span class="ident">Engine</span>, <span class="ident">Scope</span>};

<span class="kw">let</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Create initialized scope</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">scope</span> <span class="op">=</span> <span class="ident">Scope::new</span>();
<span class="ident">scope</span>.<span class="ident">push</span>(<span class="string">&quot;x&quot;</span>, <span class="number">40_i64</span>);

<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval_with_scope</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="kw-2">&amp;mut</span> <span class="ident">scope</span>, <span class="string">&quot;x += 2; x&quot;</span>)<span class="question-mark">?</span>, <span class="number">42</span>);
<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval_with_scope</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="kw-2">&amp;mut</span> <span class="ident">scope</span>, <span class="string">&quot;x += 2; x&quot;</span>)<span class="question-mark">?</span>, <span class="number">44</span>);

<span class="comment">// The variable in the scope is modified</span>
<span class="macro">assert_eq!</span>(<span class="ident">scope</span>.<span class="ident">get_value</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;x&quot;</span>).<span class="ident">expect</span>(<span class="string">&quot;variable x should exist&quot;</span>), <span class="number">44</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.eval_expression" class="method has-srclink"><a href="#method.eval_expression" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.eval_expression" class="fnname">eval_expression</a>&lt;T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;script: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Evaluate a string containing an expression.</p>
<h5 id="example-3"><a href="#example-3">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval_expression</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;40 + 2&quot;</span>)<span class="question-mark">?</span>, <span class="number">42</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.eval_expression_with_scope" class="method has-srclink"><a href="#method.eval_expression_with_scope" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.eval_expression_with_scope" class="fnname">eval_expression_with_scope</a>&lt;T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;mut <a class="struct" href="struct.Scope.html" title="struct casbin::rhai::Scope">Scope</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;script: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Evaluate a string containing an expression with own scope.</p>
<h5 id="example-4"><a href="#example-4">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai</span>::{<span class="ident">Engine</span>, <span class="ident">Scope</span>};

<span class="kw">let</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Create initialized scope</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">scope</span> <span class="op">=</span> <span class="ident">Scope::new</span>();
<span class="ident">scope</span>.<span class="ident">push</span>(<span class="string">&quot;x&quot;</span>, <span class="number">40_i64</span>);

<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval_expression_with_scope</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="kw-2">&amp;mut</span> <span class="ident">scope</span>, <span class="string">&quot;x + 2&quot;</span>)<span class="question-mark">?</span>, <span class="number">42</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.eval_ast" class="method has-srclink"><a href="#method.eval_ast" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.eval_ast" class="fnname">eval_ast</a>&lt;T&gt;(&amp;self, ast: &amp;<a class="struct" href="struct.AST.html" title="struct casbin::rhai::AST">AST</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Evaluate an <a href="struct.AST.html" title="AST"><code>AST</code></a>.</p>
<h5 id="example-5"><a href="#example-5">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Compile a script to an AST and store it for later evaluation</span>
<span class="kw">let</span> <span class="ident">ast</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">compile</span>(<span class="string">&quot;40 + 2&quot;</span>)<span class="question-mark">?</span>;

<span class="comment">// Evaluate it</span>
<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval_ast</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="kw-2">&amp;</span><span class="ident">ast</span>)<span class="question-mark">?</span>, <span class="number">42</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.eval_ast_with_scope" class="method has-srclink"><a href="#method.eval_ast_with_scope" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.eval_ast_with_scope" class="fnname">eval_ast_with_scope</a>&lt;T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;mut <a class="struct" href="struct.Scope.html" title="struct casbin::rhai::Scope">Scope</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;ast: &amp;<a class="struct" href="struct.AST.html" title="struct casbin::rhai::AST">AST</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Evaluate an <a href="struct.AST.html" title="AST"><code>AST</code></a> with own scope.</p>
<h5 id="example-6"><a href="#example-6">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai</span>::{<span class="ident">Engine</span>, <span class="ident">Scope</span>};

<span class="kw">let</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Compile a script to an AST and store it for later evaluation</span>
<span class="kw">let</span> <span class="ident">ast</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">compile</span>(<span class="string">&quot;x + 2&quot;</span>)<span class="question-mark">?</span>;

<span class="comment">// Create initialized scope</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">scope</span> <span class="op">=</span> <span class="ident">Scope::new</span>();
<span class="ident">scope</span>.<span class="ident">push</span>(<span class="string">&quot;x&quot;</span>, <span class="number">40_i64</span>);

<span class="comment">// Compile a script to an AST and store it for later evaluation</span>
<span class="kw">let</span> <span class="ident">ast</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">compile</span>(<span class="string">&quot;x += 2; x&quot;</span>)<span class="question-mark">?</span>;

<span class="comment">// Evaluate it</span>
<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval_ast_with_scope</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="kw-2">&amp;mut</span> <span class="ident">scope</span>, <span class="kw-2">&amp;</span><span class="ident">ast</span>)<span class="question-mark">?</span>, <span class="number">42</span>);
<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval_ast_with_scope</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="kw-2">&amp;mut</span> <span class="ident">scope</span>, <span class="kw-2">&amp;</span><span class="ident">ast</span>)<span class="question-mark">?</span>, <span class="number">44</span>);

<span class="comment">// The variable in the scope is modified</span>
<span class="macro">assert_eq!</span>(<span class="ident">scope</span>.<span class="ident">get_value</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;x&quot;</span>).<span class="ident">expect</span>(<span class="string">&quot;variable x should exist&quot;</span>), <span class="number">44</span>);</code></pre></div>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-2" class="impl has-srclink"><a href="#impl-2" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.run" class="method has-srclink"><a href="#method.run" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.run" class="fnname">run</a>(&amp;self, script: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Evaluate a script, returning any error (if any).</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.run_with_scope" class="method has-srclink"><a href="#method.run_with_scope" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.run_with_scope" class="fnname">run_with_scope</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;mut <a class="struct" href="struct.Scope.html" title="struct casbin::rhai::Scope">Scope</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;script: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Evaluate a script with own scope, returning any error (if any).</p>
<h6 id="constants-propagation-1"><a href="#constants-propagation-1">Constants Propagation</a></h6>
<p>If not [<code>OptimizationLevel::None</code>][crate::OptimizationLevel::None], constants defined within
the scope are propagated throughout the script <em>including</em> functions. This allows functions
to be optimized based on dynamic global constants.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.run_ast" class="method has-srclink"><a href="#method.run_ast" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.run_ast" class="fnname">run_ast</a>(&amp;self, ast: &amp;<a class="struct" href="struct.AST.html" title="struct casbin::rhai::AST">AST</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Evaluate an <a href="struct.AST.html" title="AST"><code>AST</code></a>, returning any error (if any).</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.run_ast_with_scope" class="method has-srclink"><a href="#method.run_ast_with_scope" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.run_ast_with_scope" class="fnname">run_ast_with_scope</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;mut <a class="struct" href="struct.Scope.html" title="struct casbin::rhai::Scope">Scope</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;ast: &amp;<a class="struct" href="struct.AST.html" title="struct casbin::rhai::AST">AST</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Evaluate an <a href="struct.AST.html" title="AST"><code>AST</code></a> with own scope, returning any error (if any).</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-3" class="impl has-srclink"><a href="#impl-3" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.compile" class="method has-srclink"><a href="#method.compile" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.compile" class="fnname">compile</a>(&amp;self, script: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.AST.html" title="struct casbin::rhai::AST">AST</a>, <a class="struct" href="struct.ParseError.html" title="struct casbin::rhai::ParseError">ParseError</a>&gt;</h4></section></summary><div class="docblock"><p>Compile a string into an <a href="struct.AST.html" title="AST"><code>AST</code></a>, which can be used later for evaluation.</p>
<h5 id="example-7"><a href="#example-7">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Compile a script to an AST and store it for later evaluation</span>
<span class="kw">let</span> <span class="ident">ast</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">compile</span>(<span class="string">&quot;40 + 2&quot;</span>)<span class="question-mark">?</span>;

<span class="kw">for</span> <span class="kw">_</span> <span class="kw">in</span> <span class="number">0</span>..<span class="number">42</span> {
    <span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval_ast</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="kw-2">&amp;</span><span class="ident">ast</span>)<span class="question-mark">?</span>, <span class="number">42</span>);
}</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.compile_with_scope" class="method has-srclink"><a href="#method.compile_with_scope" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.compile_with_scope" class="fnname">compile_with_scope</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;<a class="struct" href="struct.Scope.html" title="struct casbin::rhai::Scope">Scope</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;script: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.AST.html" title="struct casbin::rhai::AST">AST</a>, <a class="struct" href="struct.ParseError.html" title="struct casbin::rhai::ParseError">ParseError</a>&gt;</h4></section></summary><div class="docblock"><p>Compile a string into an <a href="struct.AST.html" title="AST"><code>AST</code></a> using own scope, which can be used later for evaluation.</p>
<h6 id="constants-propagation-2"><a href="#constants-propagation-2">Constants Propagation</a></h6>
<p>If not [<code>OptimizationLevel::None</code>][crate::OptimizationLevel::None], constants defined within
the scope are propagated throughout the script <em>including</em> functions. This allows functions
to be optimized based on dynamic global constants.</p>
<h5 id="example-8"><a href="#example-8">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai</span>::{<span class="ident">Engine</span>, <span class="ident">Scope</span>, <span class="ident">OptimizationLevel</span>};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Create initialized scope</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">scope</span> <span class="op">=</span> <span class="ident">Scope::new</span>();
<span class="ident">scope</span>.<span class="ident">push_constant</span>(<span class="string">&quot;x&quot;</span>, <span class="number">42_i64</span>);   <span class="comment">// &#39;x&#39; is a constant</span>

<span class="comment">// Compile a script to an AST and store it for later evaluation.</span>
<span class="comment">// Notice that `Full` optimization is on, so constants are folded</span>
<span class="comment">// into function calls and operators.</span>
<span class="kw">let</span> <span class="ident">ast</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">compile_with_scope</span>(<span class="kw-2">&amp;mut</span> <span class="ident">scope</span>,
            <span class="string">&quot;if x &gt; 40 { x } else { 0 }&quot;</span>    <span class="comment">// all &#39;x&#39; are replaced with 42</span>
)<span class="question-mark">?</span>;

<span class="comment">// Normally this would have failed because no scope is passed into the &#39;eval_ast&#39;</span>
<span class="comment">// call and so the variable &#39;x&#39; does not exist.  Here, it passes because the script</span>
<span class="comment">// has been optimized and all references to &#39;x&#39; are already gone.</span>
<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval_ast</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="kw-2">&amp;</span><span class="ident">ast</span>)<span class="question-mark">?</span>, <span class="number">42</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.compile_scripts_with_scope" class="method has-srclink"><a href="#method.compile_scripts_with_scope" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.compile_scripts_with_scope" class="fnname">compile_scripts_with_scope</a>&lt;S&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;<a class="struct" href="struct.Scope.html" title="struct casbin::rhai::Scope">Scope</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;scripts: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">[</a>S<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">]</a>&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.AST.html" title="struct casbin::rhai::AST">AST</a>, <a class="struct" href="struct.ParseError.html" title="struct casbin::rhai::ParseError">ParseError</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt;,&nbsp;</span></h4></section></summary><div class="docblock"><p>When passed a list of strings, first join the strings into one large script, and then
compile them into an <a href="struct.AST.html" title="AST"><code>AST</code></a> using own scope, which can be used later for evaluation.</p>
<p>The scope is useful for passing constants into the script for optimization when using
[<code>OptimizationLevel::Full</code>][crate::OptimizationLevel::Full].</p>
<h6 id="note"><a href="#note">Note</a></h6>
<p>All strings are simply parsed one after another with nothing inserted in between, not even a
newline or space.</p>
<h6 id="constants-propagation-3"><a href="#constants-propagation-3">Constants Propagation</a></h6>
<p>If not [<code>OptimizationLevel::None</code>][crate::OptimizationLevel::None], constants defined within
the scope are propagated throughout the script <em>including</em> functions. This allows functions
to be optimized based on dynamic global constants.</p>
<h5 id="example-9"><a href="#example-9">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai</span>::{<span class="ident">Engine</span>, <span class="ident">Scope</span>, <span class="ident">OptimizationLevel</span>};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Create initialized scope</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">scope</span> <span class="op">=</span> <span class="ident">Scope::new</span>();
<span class="ident">scope</span>.<span class="ident">push_constant</span>(<span class="string">&quot;x&quot;</span>, <span class="number">42_i64</span>);   <span class="comment">// &#39;x&#39; is a constant</span>

<span class="comment">// Compile a script made up of script segments to an AST and store it for later evaluation.</span>
<span class="comment">// Notice that `Full` optimization is on, so constants are folded</span>
<span class="comment">// into function calls and operators.</span>
<span class="kw">let</span> <span class="ident">ast</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">compile_scripts_with_scope</span>(<span class="kw-2">&amp;mut</span> <span class="ident">scope</span>, <span class="kw-2">&amp;</span>[
            <span class="string">&quot;if x &gt; 40&quot;</span>,            <span class="comment">// all &#39;x&#39; are replaced with 42</span>
            <span class="string">&quot;{ x } el&quot;</span>,
            <span class="string">&quot;se { 0 }&quot;</span>              <span class="comment">// segments do not need to be valid scripts!</span>
])<span class="question-mark">?</span>;

<span class="comment">// Normally this would have failed because no scope is passed into the &#39;eval_ast&#39;</span>
<span class="comment">// call and so the variable &#39;x&#39; does not exist.  Here, it passes because the script</span>
<span class="comment">// has been optimized and all references to &#39;x&#39; are already gone.</span>
<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval_ast</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="kw-2">&amp;</span><span class="ident">ast</span>)<span class="question-mark">?</span>, <span class="number">42</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.compile_expression" class="method has-srclink"><a href="#method.compile_expression" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.compile_expression" class="fnname">compile_expression</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;script: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.AST.html" title="struct casbin::rhai::AST">AST</a>, <a class="struct" href="struct.ParseError.html" title="struct casbin::rhai::ParseError">ParseError</a>&gt;</h4></section></summary><div class="docblock"><p>Compile a string containing an expression into an <a href="struct.AST.html" title="AST"><code>AST</code></a>,
which can be used later for evaluation.</p>
<h5 id="example-10"><a href="#example-10">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Compile a script to an AST and store it for later evaluation</span>
<span class="kw">let</span> <span class="ident">ast</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">compile_expression</span>(<span class="string">&quot;40 + 2&quot;</span>)<span class="question-mark">?</span>;

<span class="kw">for</span> <span class="kw">_</span> <span class="kw">in</span> <span class="number">0</span>..<span class="number">42</span> {
    <span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval_ast</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="kw-2">&amp;</span><span class="ident">ast</span>)<span class="question-mark">?</span>, <span class="number">42</span>);
}</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.compile_expression_with_scope" class="method has-srclink"><a href="#method.compile_expression_with_scope" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.compile_expression_with_scope" class="fnname">compile_expression_with_scope</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;<a class="struct" href="struct.Scope.html" title="struct casbin::rhai::Scope">Scope</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;script: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.AST.html" title="struct casbin::rhai::AST">AST</a>, <a class="struct" href="struct.ParseError.html" title="struct casbin::rhai::ParseError">ParseError</a>&gt;</h4></section></summary><div class="docblock"><p>Compile a string containing an expression into an <a href="struct.AST.html" title="AST"><code>AST</code></a> using own scope,
which can be used later for evaluation.</p>
<h5 id="example-11"><a href="#example-11">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai</span>::{<span class="ident">Engine</span>, <span class="ident">Scope</span>, <span class="ident">OptimizationLevel</span>};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Create initialized scope</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">scope</span> <span class="op">=</span> <span class="ident">Scope::new</span>();
<span class="ident">scope</span>.<span class="ident">push_constant</span>(<span class="string">&quot;x&quot;</span>, <span class="number">10_i64</span>);   <span class="comment">// &#39;x&#39; is a constant</span>

<span class="comment">// Compile a script to an AST and store it for later evaluation.</span>
<span class="comment">// Notice that `Full` optimization is on, so constants are folded</span>
<span class="comment">// into function calls and operators.</span>
<span class="kw">let</span> <span class="ident">ast</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">compile_expression_with_scope</span>(<span class="kw-2">&amp;mut</span> <span class="ident">scope</span>,
            <span class="string">&quot;2 + (x + x) * 2&quot;</span>    <span class="comment">// all &#39;x&#39; are replaced with 10</span>
)<span class="question-mark">?</span>;

<span class="comment">// Normally this would have failed because no scope is passed into the &#39;eval_ast&#39;</span>
<span class="comment">// call and so the variable &#39;x&#39; does not exist.  Here, it passes because the script</span>
<span class="comment">// has been optimized and all references to &#39;x&#39; are already gone.</span>
<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval_ast</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="kw-2">&amp;</span><span class="ident">ast</span>)<span class="question-mark">?</span>, <span class="number">42</span>);</code></pre></div>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-4" class="impl has-srclink"><a href="#impl-4" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.parse_json" class="method has-srclink"><a href="#method.parse_json" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.parse_json" class="fnname">parse_json</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;json: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;has_null: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/collections/btree/map/struct.BTreeMap.html" title="struct alloc::collections::btree::map::BTreeMap">BTreeMap</a>&lt;SmartString&lt;LazyCompact&gt;, <a class="struct" href="plugin/struct.Dynamic.html" title="struct casbin::rhai::plugin::Dynamic">Dynamic</a>&gt;, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Parse a JSON string into an <a href="type.Map.html" title="Map">object map</a>.</p>
<p>This is a light-weight alternative to using, say, <a href="https://crates.io/crates/serde_json"><code>serde_json</code></a>
to deserialize the JSON.</p>
<p>Not available under <code>no_object</code>.</p>
<p>The JSON string must be an object hash.  It cannot be a simple primitive value.</p>
<p>Set <code>has_null</code> to <code>true</code> in order to map <code>null</code> values to <code>()</code>.
Setting it to <code>false</code> causes a syntax error for any <code>null</code> value.</p>
<p>JSON sub-objects are handled transparently.</p>
<p>This function can be used together with <a href="fn.format_map_as_json.html" title="format_map_as_json"><code>format_map_as_json</code></a> to work with JSON texts
without using the <a href="https://crates.io/crates/serde"><code>serde</code></a> crate (which is heavy).</p>
<h5 id="example-12"><a href="#example-12">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai</span>::{<span class="ident">Engine</span>, <span class="ident">Map</span>};

<span class="kw">let</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="kw">let</span> <span class="ident">map</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">parse_json</span>(<span class="string">r#&quot;
{
    &quot;a&quot;: 123,
    &quot;b&quot;: 42,
    &quot;c&quot;: {
        &quot;x&quot;: false,
        &quot;y&quot;: true,
        &quot;z&quot;: &#39;$&#39;
    },
    &quot;d&quot;: null
}&quot;#</span>, <span class="bool-val">true</span>)<span class="question-mark">?</span>;

<span class="macro">assert_eq!</span>(<span class="ident">map</span>.<span class="ident">len</span>(), <span class="number">4</span>);
<span class="macro">assert_eq!</span>(<span class="ident">map</span>[<span class="string">&quot;a&quot;</span>].<span class="ident">as_int</span>().<span class="ident">expect</span>(<span class="string">&quot;a should exist&quot;</span>), <span class="number">123</span>);
<span class="macro">assert_eq!</span>(<span class="ident">map</span>[<span class="string">&quot;b&quot;</span>].<span class="ident">as_int</span>().<span class="ident">expect</span>(<span class="string">&quot;b should exist&quot;</span>), <span class="number">42</span>);
<span class="macro">assert_eq!</span>(<span class="ident">map</span>[<span class="string">&quot;d&quot;</span>].<span class="ident">as_unit</span>().<span class="ident">expect</span>(<span class="string">&quot;d should exist&quot;</span>), ());

<span class="kw">let</span> <span class="ident">c</span> <span class="op">=</span> <span class="ident">map</span>[<span class="string">&quot;c&quot;</span>].<span class="ident">read_lock</span>::<span class="op">&lt;</span><span class="ident">Map</span><span class="op">&gt;</span>().<span class="ident">expect</span>(<span class="string">&quot;c should exist&quot;</span>);
<span class="macro">assert_eq!</span>(<span class="ident">c</span>[<span class="string">&quot;x&quot;</span>].<span class="ident">as_bool</span>().<span class="ident">expect</span>(<span class="string">&quot;x should be bool&quot;</span>), <span class="bool-val">false</span>);
<span class="macro">assert_eq!</span>(<span class="ident">c</span>[<span class="string">&quot;y&quot;</span>].<span class="ident">as_bool</span>().<span class="ident">expect</span>(<span class="string">&quot;y should be bool&quot;</span>), <span class="bool-val">true</span>);
<span class="macro">assert_eq!</span>(<span class="ident">c</span>[<span class="string">&quot;z&quot;</span>].<span class="ident">as_char</span>().<span class="ident">expect</span>(<span class="string">&quot;z should be char&quot;</span>), <span class="string">&#39;$&#39;</span>);</code></pre></div>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-5" class="impl has-srclink"><a href="#impl-5" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.compile_file" class="method has-srclink"><a href="#method.compile_file" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.compile_file" class="fnname">compile_file</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;path: <a class="struct" href="https://doc.rust-lang.org/1.60.0/std/path/struct.PathBuf.html" title="struct std::path::PathBuf">PathBuf</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.AST.html" title="struct casbin::rhai::AST">AST</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Compile a script file into an <a href="struct.AST.html" title="AST"><code>AST</code></a>, which can be used later for evaluation.</p>
<p>Not available under <code>no_std</code> or <code>WASM</code>.</p>
<h5 id="example-13"><a href="#example-13">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Compile a script file to an AST and store it for later evaluation.</span>
<span class="comment">// Notice that a PathBuf is required which can easily be constructed from a string.</span>
<span class="kw">let</span> <span class="ident">ast</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">compile_file</span>(<span class="string">&quot;script.rhai&quot;</span>.<span class="ident">into</span>())<span class="question-mark">?</span>;

<span class="kw">for</span> <span class="kw">_</span> <span class="kw">in</span> <span class="number">0</span>..<span class="number">42</span> {
    <span class="ident">engine</span>.<span class="ident">eval_ast</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="kw-2">&amp;</span><span class="ident">ast</span>)<span class="question-mark">?</span>;
}</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.compile_file_with_scope" class="method has-srclink"><a href="#method.compile_file_with_scope" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.compile_file_with_scope" class="fnname">compile_file_with_scope</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;<a class="struct" href="struct.Scope.html" title="struct casbin::rhai::Scope">Scope</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;path: <a class="struct" href="https://doc.rust-lang.org/1.60.0/std/path/struct.PathBuf.html" title="struct std::path::PathBuf">PathBuf</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.AST.html" title="struct casbin::rhai::AST">AST</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Compile a script file into an <a href="struct.AST.html" title="AST"><code>AST</code></a> using own scope, which can be used later for evaluation.</p>
<p>Not available under <code>no_std</code> or <code>WASM</code>.</p>
<h6 id="constants-propagation-4"><a href="#constants-propagation-4">Constants Propagation</a></h6>
<p>If not [<code>OptimizationLevel::None</code>][crate::OptimizationLevel::None], constants defined within
the scope are propagated throughout the script <em>including</em> functions.</p>
<p>This allows functions to be optimized based on dynamic global constants.</p>
<h5 id="example-14"><a href="#example-14">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai</span>::{<span class="ident">Engine</span>, <span class="ident">Scope</span>, <span class="ident">OptimizationLevel</span>};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Create initialized scope</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">scope</span> <span class="op">=</span> <span class="ident">Scope::new</span>();
<span class="ident">scope</span>.<span class="ident">push_constant</span>(<span class="string">&quot;x&quot;</span>, <span class="number">42_i64</span>);   <span class="comment">// &#39;x&#39; is a constant</span>

<span class="comment">// Compile a script to an AST and store it for later evaluation.</span>
<span class="comment">// Notice that a PathBuf is required which can easily be constructed from a string.</span>
<span class="kw">let</span> <span class="ident">ast</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">compile_file_with_scope</span>(<span class="kw-2">&amp;mut</span> <span class="ident">scope</span>, <span class="string">&quot;script.rhai&quot;</span>.<span class="ident">into</span>())<span class="question-mark">?</span>;

<span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">eval_ast</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="kw-2">&amp;</span><span class="ident">ast</span>)<span class="question-mark">?</span>;</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.eval_file" class="method has-srclink"><a href="#method.eval_file" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.eval_file" class="fnname">eval_file</a>&lt;T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;path: <a class="struct" href="https://doc.rust-lang.org/1.60.0/std/path/struct.PathBuf.html" title="struct std::path::PathBuf">PathBuf</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Evaluate a script file.</p>
<p>Not available under <code>no_std</code> or <code>WASM</code>.</p>
<h5 id="example-15"><a href="#example-15">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Notice that a PathBuf is required which can easily be constructed from a string.</span>
<span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">eval_file</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;script.rhai&quot;</span>.<span class="ident">into</span>())<span class="question-mark">?</span>;</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.eval_file_with_scope" class="method has-srclink"><a href="#method.eval_file_with_scope" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.eval_file_with_scope" class="fnname">eval_file_with_scope</a>&lt;T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;mut <a class="struct" href="struct.Scope.html" title="struct casbin::rhai::Scope">Scope</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;path: <a class="struct" href="https://doc.rust-lang.org/1.60.0/std/path/struct.PathBuf.html" title="struct std::path::PathBuf">PathBuf</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Evaluate a script file with own scope.</p>
<p>Not available under <code>no_std</code> or <code>WASM</code>.</p>
<h6 id="constants-propagation-5"><a href="#constants-propagation-5">Constants Propagation</a></h6>
<p>If not [<code>OptimizationLevel::None</code>][crate::OptimizationLevel::None], constants defined within
the scope are propagated throughout the script <em>including</em> functions.</p>
<p>This allows functions to be optimized based on dynamic global constants.</p>
<h5 id="example-16"><a href="#example-16">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai</span>::{<span class="ident">Engine</span>, <span class="ident">Scope</span>};

<span class="kw">let</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Create initialized scope</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">scope</span> <span class="op">=</span> <span class="ident">Scope::new</span>();
<span class="ident">scope</span>.<span class="ident">push</span>(<span class="string">&quot;x&quot;</span>, <span class="number">42_i64</span>);

<span class="comment">// Notice that a PathBuf is required which can easily be constructed from a string.</span>
<span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">eval_file_with_scope</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="kw-2">&amp;mut</span> <span class="ident">scope</span>, <span class="string">&quot;script.rhai&quot;</span>.<span class="ident">into</span>())<span class="question-mark">?</span>;</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.run_file" class="method has-srclink"><a href="#method.run_file" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.run_file" class="fnname">run_file</a>(&amp;self, path: <a class="struct" href="https://doc.rust-lang.org/1.60.0/std/path/struct.PathBuf.html" title="struct std::path::PathBuf">PathBuf</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Evaluate a file, returning any error (if any).</p>
<p>Not available under <code>no_std</code> or <code>WASM</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.run_file_with_scope" class="method has-srclink"><a href="#method.run_file_with_scope" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.run_file_with_scope" class="fnname">run_file_with_scope</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;mut <a class="struct" href="struct.Scope.html" title="struct casbin::rhai::Scope">Scope</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;path: <a class="struct" href="https://doc.rust-lang.org/1.60.0/std/path/struct.PathBuf.html" title="struct std::path::PathBuf">PathBuf</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Evaluate a file with own scope, returning any error (if any).</p>
<p>Not available under <code>no_std</code> or <code>WASM</code>.</p>
<h6 id="constants-propagation-6"><a href="#constants-propagation-6">Constants Propagation</a></h6>
<p>If not [<code>OptimizationLevel::None</code>][crate::OptimizationLevel::None], constants defined within
the scope are propagated throughout the script <em>including</em> functions.</p>
<p>This allows functions to be optimized based on dynamic global constants.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-6" class="impl has-srclink"><a href="#impl-6" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_fn" class="method has-srclink"><a href="#method.register_fn" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_fn" class="fnname">register_fn</a>&lt;N, A, F&gt;(&amp;mut self, name: N, func: F) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;N: <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;SmartString&lt;LazyCompact&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="trait.RegisterNativeFunction.html" title="trait casbin::rhai::RegisterNativeFunction">RegisterNativeFunction</a>&lt;A, <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>&gt;,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register a custom function with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<h5 id="example-17"><a href="#example-17">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="comment">// Normal function</span>
<span class="kw">fn</span> <span class="ident">add</span>(<span class="ident">x</span>: <span class="ident">i64</span>, <span class="ident">y</span>: <span class="ident">i64</span>) -&gt; <span class="ident">i64</span> {
    <span class="ident">x</span> <span class="op">+</span> <span class="ident">y</span>
}

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="ident">engine</span>.<span class="ident">register_fn</span>(<span class="string">&quot;add&quot;</span>, <span class="ident">add</span>);

<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;add(40, 2)&quot;</span>)<span class="question-mark">?</span>, <span class="number">42</span>);

<span class="comment">// You can also register a closure.</span>
<span class="ident">engine</span>.<span class="ident">register_fn</span>(<span class="string">&quot;sub&quot;</span>, <span class="op">|</span><span class="ident">x</span>: <span class="ident">i64</span>, <span class="ident">y</span>: <span class="ident">i64</span><span class="op">|</span> <span class="ident">x</span> <span class="op">-</span> <span class="ident">y</span> );

<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;sub(44, 2)&quot;</span>)<span class="question-mark">?</span>, <span class="number">42</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_result_fn" class="method has-srclink"><a href="#method.register_result_fn" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_result_fn" class="fnname">register_result_fn</a>&lt;N, A, F, R&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;name: N, <br>&nbsp;&nbsp;&nbsp;&nbsp;func: F<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;N: <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;SmartString&lt;LazyCompact&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="trait.RegisterNativeFunction.html" title="trait casbin::rhai::RegisterNativeFunction">RegisterNativeFunction</a>&lt;A, <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;R, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;&gt;,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register a custom fallible function with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<h5 id="example-18"><a href="#example-18">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai</span>::{<span class="ident">Engine</span>, <span class="ident">EvalAltResult</span>};

<span class="comment">// Normal function</span>
<span class="kw">fn</span> <span class="ident">div</span>(<span class="ident">x</span>: <span class="ident">i64</span>, <span class="ident">y</span>: <span class="ident">i64</span>) -&gt; <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">i64</span>, <span class="ident">Box</span><span class="op">&lt;</span><span class="ident">EvalAltResult</span><span class="op">&gt;</span><span class="op">&gt;</span> {
    <span class="kw">if</span> <span class="ident">y</span> <span class="op">==</span> <span class="number">0</span> {
        <span class="comment">// &#39;.into()&#39; automatically converts to &#39;Box&lt;EvalAltResult::ErrorRuntime&gt;&#39;</span>
        <span class="prelude-val">Err</span>(<span class="string">&quot;division by zero!&quot;</span>.<span class="ident">into</span>())
    } <span class="kw">else</span> {
        <span class="prelude-val">Ok</span>(<span class="ident">x</span> <span class="op">/</span> <span class="ident">y</span>)
    }
}

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="ident">engine</span>.<span class="ident">register_result_fn</span>(<span class="string">&quot;div&quot;</span>, <span class="ident">div</span>);

<span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;div(42, 0)&quot;</span>)
      .<span class="ident">expect_err</span>(<span class="string">&quot;expecting division by zero error!&quot;</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_raw_fn" class="method has-srclink"><a href="#method.register_raw_fn" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_raw_fn" class="fnname">register_raw_fn</a>&lt;N, T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;name: N, <br>&nbsp;&nbsp;&nbsp;&nbsp;arg_types: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">[</a><a class="struct" href="plugin/struct.TypeId.html" title="struct casbin::rhai::plugin::TypeId">TypeId</a><a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">]</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;func: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="struct" href="plugin/struct.NativeCallContext.html" title="struct casbin::rhai::plugin::NativeCallContext">NativeCallContext</a>&lt;'_&gt;, <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">&amp;mut [</a>&amp;mut <a class="struct" href="plugin/struct.Dynamic.html" title="struct casbin::rhai::plugin::Dynamic">Dynamic</a><a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">]</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;N: <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;SmartString&lt;LazyCompact&gt;&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register a function of the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<h5 id="warning---low-level-api"><a href="#warning---low-level-api">WARNING - Low Level API</a></h5>
<p>This function is very low level.  It takes a list of <a href="plugin/struct.TypeId.html" title="std::any::TypeId"><code>TypeId</code></a>’s
indicating the actual types of the parameters.</p>
<h5 id="arguments"><a href="#arguments">Arguments</a></h5>
<p>Arguments are simply passed in as a mutable array of <a href="plugin/struct.Dynamic.html" title="crate::Dynamic"><code>&amp;mut Dynamic</code></a>.
The arguments are guaranteed to be of the correct types matching the <a href="plugin/struct.TypeId.html" title="std::any::TypeId"><code>TypeId</code></a>’s.</p>
<p>To access a primary argument value (i.e. cloning is cheap), use: <code>args[n].as_xxx().unwrap()</code></p>
<p>To access an argument value and avoid cloning, use <code>std::mem::take(args[n]).cast::&lt;T&gt;()</code>.
Notice that this will <em>consume</em> the argument, replacing it with <code>()</code>.</p>
<p>To access the first mutable parameter, use <code>args.get_mut(0).unwrap()</code></p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_type" class="method has-srclink"><a href="#method.register_type" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_type" class="fnname">register_type</a>&lt;T&gt;(&amp;mut self) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register a custom type for use with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.
The type must implement <a href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="Clone"><code>Clone</code></a>.</p>
<h5 id="example-19"><a href="#example-19">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Eq</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">struct</span> <span class="ident">TestStruct</span> {
    <span class="ident">field</span>: <span class="ident">i64</span>
}

<span class="kw">impl</span> <span class="ident">TestStruct</span> {
    <span class="kw">fn</span> <span class="ident">new</span>() -&gt; <span class="self">Self</span> {
        <span class="self">Self</span> { <span class="ident">field</span>: <span class="number">1</span> }
    }
    <span class="kw">fn</span> <span class="ident">update</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>, <span class="ident">offset</span>: <span class="ident">i64</span>) {
        <span class="self">self</span>.<span class="ident">field</span> <span class="op">+</span><span class="op">=</span> <span class="ident">offset</span>;
    }
}

<span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register API for the custom type.</span>
<span class="ident">engine</span>
    .<span class="ident">register_type</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>()
    .<span class="ident">register_fn</span>(<span class="string">&quot;new_ts&quot;</span>, <span class="ident">TestStruct::new</span>)
    <span class="comment">// Use `register_fn` to register methods on the type.</span>
    .<span class="ident">register_fn</span>(<span class="string">&quot;update&quot;</span>, <span class="ident">TestStruct::update</span>);

<span class="macro">assert_eq!</span>(
    <span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>(<span class="string">&quot;let x = new_ts(); x.update(41); x&quot;</span>)<span class="question-mark">?</span>,
    <span class="ident">TestStruct</span> { <span class="ident">field</span>: <span class="number">42</span> }
);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_type_with_name" class="method has-srclink"><a href="#method.register_type_with_name" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_type_with_name" class="fnname">register_type_with_name</a>&lt;T&gt;(&amp;mut self, name: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register a custom type for use with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>, with a pretty-print name
for the <code>type_of</code> function. The type must implement <a href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="Clone"><code>Clone</code></a>.</p>
<h5 id="example-20"><a href="#example-20">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Clone</span>)]</span>
<span class="kw">struct</span> <span class="ident">TestStruct</span> {
    <span class="ident">field</span>: <span class="ident">i64</span>
}

<span class="kw">impl</span> <span class="ident">TestStruct</span> {
    <span class="kw">fn</span> <span class="ident">new</span>() -&gt; <span class="self">Self</span> {
        <span class="self">Self</span> { <span class="ident">field</span>: <span class="number">1</span> }
    }
}

<span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register API for the custom type.</span>
<span class="ident">engine</span>
    .<span class="ident">register_type</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>()
    .<span class="ident">register_fn</span>(<span class="string">&quot;new_ts&quot;</span>, <span class="ident">TestStruct::new</span>);

<span class="macro">assert_eq!</span>(
    <span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>(<span class="string">&quot;let x = new_ts(); type_of(x)&quot;</span>)<span class="question-mark">?</span>,
    <span class="string">&quot;rust_out::TestStruct&quot;</span>
);

<span class="comment">// Re-register the custom type with a name.</span>
<span class="ident">engine</span>.<span class="ident">register_type_with_name</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>(<span class="string">&quot;Hello&quot;</span>);

<span class="macro">assert_eq!</span>(
    <span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>(<span class="string">&quot;let x = new_ts(); type_of(x)&quot;</span>)<span class="question-mark">?</span>,
    <span class="string">&quot;Hello&quot;</span>
);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_type_with_name_raw" class="method has-srclink"><a href="#method.register_type_with_name_raw" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_type_with_name_raw" class="fnname">register_type_with_name_raw</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;fully_qualified_type_path: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;SmartString&lt;LazyCompact&gt;&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;name: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;SmartString&lt;LazyCompact&gt;&gt;<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h4></section></summary><div class="docblock"><p>Register a custom type for use with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>, with a pretty-print name
for the <code>type_of</code> function. The type must implement <a href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="Clone"><code>Clone</code></a>.</p>
<h5 id="warning---low-level-api-1"><a href="#warning---low-level-api-1">WARNING - Low Level API</a></h5>
<p>This function is low level.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_iterator" class="method has-srclink"><a href="#method.register_iterator" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_iterator" class="fnname">register_iterator</a>&lt;T&gt;(&amp;mut self) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;T as <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.60.0/core/iter/traits/collect/trait.IntoIterator.html#associatedtype.Item" title="type core::iter::traits::collect::IntoIterator::Item">Item</a>: Variant,<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;T as <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/iter/traits/collect/trait.IntoIterator.html" title="trait core::iter::traits::collect::IntoIterator">IntoIterator</a>&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.60.0/core/iter/traits/collect/trait.IntoIterator.html#associatedtype.Item" title="type core::iter::traits::collect::IntoIterator::Item">Item</a>: <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register an type iterator for an iterable type with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.
This is an advanced API.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_get" class="method has-srclink"><a href="#method.register_get" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_get" class="fnname">register_get</a>&lt;T, V&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;name: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;get_fn: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.reference.html">&amp;mut </a>T) -&gt; V + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;V: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register a getter function for a member of a registered type with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<p>The function signature must start with <code>&amp;mut self</code> and not <code>&amp;self</code>.</p>
<p>Not available under <code>no_object</code>.</p>
<h5 id="example-21"><a href="#example-21">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Clone</span>)]</span>
<span class="kw">struct</span> <span class="ident">TestStruct</span> {
    <span class="ident">field</span>: <span class="ident">i64</span>
}

<span class="kw">impl</span> <span class="ident">TestStruct</span> {
    <span class="kw">fn</span> <span class="ident">new</span>() -&gt; <span class="self">Self</span> {
        <span class="self">Self</span> { <span class="ident">field</span>: <span class="number">1</span> }
    }
    <span class="comment">// Even a getter must start with `&amp;mut self` and not `&amp;self`.</span>
    <span class="kw">fn</span> <span class="ident">get_field</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>) -&gt; <span class="ident">i64</span>  {
        <span class="self">self</span>.<span class="ident">field</span>
    }
}

<span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register API for the custom type.</span>
<span class="ident">engine</span>
    .<span class="ident">register_type</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>()
    .<span class="ident">register_fn</span>(<span class="string">&quot;new_ts&quot;</span>, <span class="ident">TestStruct::new</span>)
    <span class="comment">// Register a getter on a property (notice it doesn&#39;t have to be the same name).</span>
    .<span class="ident">register_get</span>(<span class="string">&quot;xyz&quot;</span>, <span class="ident">TestStruct::get_field</span>);

<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;let a = new_ts(); a.xyz&quot;</span>)<span class="question-mark">?</span>, <span class="number">1</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_get_result" class="method has-srclink"><a href="#method.register_get_result" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_get_result" class="fnname">register_get_result</a>&lt;T, V&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;name: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;get_fn: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.reference.html">&amp;mut </a>T) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;V, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;V: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register a getter function for a member of a registered type with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<p>The function signature must start with <code>&amp;mut self</code> and not <code>&amp;self</code>.</p>
<p>Not available under <code>no_object</code>.</p>
<h5 id="example-22"><a href="#example-22">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai</span>::{<span class="ident">Engine</span>, <span class="ident">Dynamic</span>, <span class="ident">EvalAltResult</span>};

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Clone</span>)]</span>
<span class="kw">struct</span> <span class="ident">TestStruct</span> {
    <span class="ident">field</span>: <span class="ident">i64</span>
}

<span class="kw">impl</span> <span class="ident">TestStruct</span> {
    <span class="kw">fn</span> <span class="ident">new</span>() -&gt; <span class="self">Self</span> {
        <span class="self">Self</span> { <span class="ident">field</span>: <span class="number">1</span> }
    }
    <span class="comment">// Even a getter must start with `&amp;mut self` and not `&amp;self`.</span>
    <span class="kw">fn</span> <span class="ident">get_field</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>) -&gt; <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">i64</span>, <span class="ident">Box</span><span class="op">&lt;</span><span class="ident">EvalAltResult</span><span class="op">&gt;</span><span class="op">&gt;</span> {
        <span class="prelude-val">Ok</span>(<span class="self">self</span>.<span class="ident">field</span>)
    }
}

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register API for the custom type.</span>
<span class="ident">engine</span>
    .<span class="ident">register_type</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>()
    .<span class="ident">register_fn</span>(<span class="string">&quot;new_ts&quot;</span>, <span class="ident">TestStruct::new</span>)
    <span class="comment">// Register a getter on a property (notice it doesn&#39;t have to be the same name).</span>
    .<span class="ident">register_get_result</span>(<span class="string">&quot;xyz&quot;</span>, <span class="ident">TestStruct::get_field</span>);

<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;let a = new_ts(); a.xyz&quot;</span>)<span class="question-mark">?</span>, <span class="number">1</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_set" class="method has-srclink"><a href="#method.register_set" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_set" class="fnname">register_set</a>&lt;T, V&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;name: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;set_fn: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.reference.html">&amp;mut </a>T, V) + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;V: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register a setter function for a member of a registered type with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<p>Not available under <code>no_object</code>.</p>
<h5 id="example-23"><a href="#example-23">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Eq</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">struct</span> <span class="ident">TestStruct</span> {
    <span class="ident">field</span>: <span class="ident">i64</span>
}

<span class="kw">impl</span> <span class="ident">TestStruct</span> {
    <span class="kw">fn</span> <span class="ident">new</span>() -&gt; <span class="self">Self</span> {
        <span class="self">Self</span> { <span class="ident">field</span>: <span class="number">1</span> }
    }
    <span class="kw">fn</span> <span class="ident">set_field</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>, <span class="ident">new_val</span>: <span class="ident">i64</span>) {
        <span class="self">self</span>.<span class="ident">field</span> <span class="op">=</span> <span class="ident">new_val</span>;
    }
}

<span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register API for the custom type.</span>
<span class="ident">engine</span>
    .<span class="ident">register_type</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>()
    .<span class="ident">register_fn</span>(<span class="string">&quot;new_ts&quot;</span>, <span class="ident">TestStruct::new</span>)
    <span class="comment">// Register a setter on a property (notice it doesn&#39;t have to be the same name)</span>
    .<span class="ident">register_set</span>(<span class="string">&quot;xyz&quot;</span>, <span class="ident">TestStruct::set_field</span>);

<span class="comment">// Notice that, with a getter, there is no way to get the property value</span>
<span class="macro">assert_eq!</span>(
    <span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>(<span class="string">&quot;let a = new_ts(); a.xyz = 42; a&quot;</span>)<span class="question-mark">?</span>,
    <span class="ident">TestStruct</span> { <span class="ident">field</span>: <span class="number">42</span> }
);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_set_result" class="method has-srclink"><a href="#method.register_set_result" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_set_result" class="fnname">register_set_result</a>&lt;T, V&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;name: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;set_fn: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.reference.html">&amp;mut </a>T, V) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;V: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register a setter function for a member of a registered type with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<p>Not available under <code>no_object</code>.</p>
<h5 id="example-24"><a href="#example-24">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai</span>::{<span class="ident">Engine</span>, <span class="ident">Dynamic</span>, <span class="ident">EvalAltResult</span>};

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Eq</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">struct</span> <span class="ident">TestStruct</span> {
    <span class="ident">field</span>: <span class="ident">i64</span>
}

<span class="kw">impl</span> <span class="ident">TestStruct</span> {
    <span class="kw">fn</span> <span class="ident">new</span>() -&gt; <span class="self">Self</span> {
        <span class="self">Self</span> { <span class="ident">field</span>: <span class="number">1</span> }
    }
    <span class="kw">fn</span> <span class="ident">set_field</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>, <span class="ident">new_val</span>: <span class="ident">i64</span>) -&gt; <span class="prelude-ty">Result</span><span class="op">&lt;</span>(), <span class="ident">Box</span><span class="op">&lt;</span><span class="ident">rhai::EvalAltResult</span><span class="op">&gt;</span><span class="op">&gt;</span> {
        <span class="self">self</span>.<span class="ident">field</span> <span class="op">=</span> <span class="ident">new_val</span>;
        <span class="prelude-val">Ok</span>(())
    }
}

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register API for the custom type.</span>
<span class="ident">engine</span>
    .<span class="ident">register_type</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>()
    .<span class="ident">register_fn</span>(<span class="string">&quot;new_ts&quot;</span>, <span class="ident">TestStruct::new</span>)
    <span class="comment">// Register a setter on a property (notice it doesn&#39;t have to be the same name)</span>
    .<span class="ident">register_set_result</span>(<span class="string">&quot;xyz&quot;</span>, <span class="ident">TestStruct::set_field</span>);

<span class="comment">// Notice that, with a getter, there is no way to get the property value</span>
<span class="macro">assert_eq!</span>(
    <span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>(<span class="string">&quot;let a = new_ts(); a.xyz = 42; a&quot;</span>)<span class="question-mark">?</span>,
    <span class="ident">TestStruct</span> { <span class="ident">field</span>: <span class="number">42</span> }
);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_get_set" class="method has-srclink"><a href="#method.register_get_set" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_get_set" class="fnname">register_get_set</a>&lt;T, V&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;name: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;get_fn: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.reference.html">&amp;mut </a>T) -&gt; V + SendSync + 'static, <br>&nbsp;&nbsp;&nbsp;&nbsp;set_fn: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.reference.html">&amp;mut </a>T, V) + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;V: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Short-hand for registering both getter and setter functions
of a registered type with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<p>All function signatures must start with <code>&amp;mut self</code> and not <code>&amp;self</code>.</p>
<p>Not available under <code>no_object</code>.</p>
<h5 id="example-25"><a href="#example-25">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Clone</span>)]</span>
<span class="kw">struct</span> <span class="ident">TestStruct</span> {
    <span class="ident">field</span>: <span class="ident">i64</span>
}

<span class="kw">impl</span> <span class="ident">TestStruct</span> {
    <span class="kw">fn</span> <span class="ident">new</span>() -&gt; <span class="self">Self</span> {
        <span class="self">Self</span> { <span class="ident">field</span>: <span class="number">1</span> }
    }
    <span class="comment">// Even a getter must start with `&amp;mut self` and not `&amp;self`.</span>
    <span class="kw">fn</span> <span class="ident">get_field</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>) -&gt; <span class="ident">i64</span> {
        <span class="self">self</span>.<span class="ident">field</span>
    }
    <span class="kw">fn</span> <span class="ident">set_field</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>, <span class="ident">new_val</span>: <span class="ident">i64</span>) {
        <span class="self">self</span>.<span class="ident">field</span> <span class="op">=</span> <span class="ident">new_val</span>;
    }
}

<span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register API for the custom type.</span>
<span class="ident">engine</span>
    .<span class="ident">register_type</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>()
    .<span class="ident">register_fn</span>(<span class="string">&quot;new_ts&quot;</span>, <span class="ident">TestStruct::new</span>)
    <span class="comment">// Register both a getter and a setter on a property</span>
    <span class="comment">// (notice it doesn&#39;t have to be the same name)</span>
    .<span class="ident">register_get_set</span>(<span class="string">&quot;xyz&quot;</span>, <span class="ident">TestStruct::get_field</span>, <span class="ident">TestStruct::set_field</span>);

<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;let a = new_ts(); a.xyz = 42; a.xyz&quot;</span>)<span class="question-mark">?</span>, <span class="number">42</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_indexer_get" class="method has-srclink"><a href="#method.register_indexer_get" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_indexer_get" class="fnname">register_indexer_get</a>&lt;T, X, V&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;get_fn: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.reference.html">&amp;mut </a>T, X) -&gt; V + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;X: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;V: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register an index getter for a custom type with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<p>The function signature must start with <code>&amp;mut self</code> and not <code>&amp;self</code>.</p>
<p>Not available under both <code>no_index</code> and <code>no_object</code>.</p>
<h5 id="panics-1"><a href="#panics-1">Panics</a></h5>
<p>Panics if the type is <a href="type.Array.html" title="crate::Array"><code>Array</code></a>, <a href="type.Map.html" title="crate::Map"><code>Map</code></a>, <a href="https://doc.rust-lang.org/1.60.0/alloc/string/struct.String.html" title="String"><code>String</code></a>,
<a href="plugin/struct.ImmutableString.html" title="crate::ImmutableString"><code>ImmutableString</code></a>, <code>&amp;str</code> or <a href="type.INT.html" title="crate::INT"><code>INT</code></a>.
Indexers for arrays, object maps, strings and integers cannot be registered.</p>
<h5 id="example-26"><a href="#example-26">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Clone</span>)]</span>
<span class="kw">struct</span> <span class="ident">TestStruct</span> {
    <span class="ident">fields</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>
}

<span class="kw">impl</span> <span class="ident">TestStruct</span> {
    <span class="kw">fn</span> <span class="ident">new</span>() -&gt; <span class="self">Self</span> {
        <span class="self">Self</span> { <span class="ident">fields</span>: <span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>] }
    }
    <span class="comment">// Even a getter must start with `&amp;mut self` and not `&amp;self`.</span>
    <span class="kw">fn</span> <span class="ident">get_field</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>, <span class="ident">index</span>: <span class="ident">i64</span>) -&gt; <span class="ident">i64</span> {
        <span class="self">self</span>.<span class="ident">fields</span>[<span class="ident">index</span> <span class="kw">as</span> <span class="ident">usize</span>]
    }
}

<span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register API for the custom type.</span>
<span class="ident">engine</span>.<span class="ident">register_type</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>();

<span class="ident">engine</span>
    .<span class="ident">register_fn</span>(<span class="string">&quot;new_ts&quot;</span>, <span class="ident">TestStruct::new</span>)
    <span class="comment">// Register an indexer.</span>
    .<span class="ident">register_indexer_get</span>(<span class="ident">TestStruct::get_field</span>);

<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;let a = new_ts(); a[2]&quot;</span>)<span class="question-mark">?</span>, <span class="number">3</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_indexer_get_result" class="method has-srclink"><a href="#method.register_indexer_get_result" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_indexer_get_result" class="fnname">register_indexer_get_result</a>&lt;T, X, V&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;get_fn: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.reference.html">&amp;mut </a>T, X) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;V, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;X: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;V: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register an index getter for a custom type with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<p>The function signature must start with <code>&amp;mut self</code> and not <code>&amp;self</code>.</p>
<p>Not available under both <code>no_index</code> and <code>no_object</code>.</p>
<h5 id="panics-2"><a href="#panics-2">Panics</a></h5>
<p>Panics if the type is <a href="type.Array.html" title="crate::Array"><code>Array</code></a>, <a href="type.Map.html" title="crate::Map"><code>Map</code></a>, <a href="https://doc.rust-lang.org/1.60.0/alloc/string/struct.String.html" title="String"><code>String</code></a>,
<a href="plugin/struct.ImmutableString.html" title="crate::ImmutableString"><code>ImmutableString</code></a>, <code>&amp;str</code> or <a href="type.INT.html" title="crate::INT"><code>INT</code></a>.
Indexers for arrays, object maps, strings and integers cannot be registered.</p>
<h5 id="example-27"><a href="#example-27">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai</span>::{<span class="ident">Engine</span>, <span class="ident">Dynamic</span>, <span class="ident">EvalAltResult</span>};

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Clone</span>)]</span>
<span class="kw">struct</span> <span class="ident">TestStruct</span> {
    <span class="ident">fields</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>
}

<span class="kw">impl</span> <span class="ident">TestStruct</span> {
    <span class="kw">fn</span> <span class="ident">new</span>() -&gt; <span class="self">Self</span> {
        <span class="self">Self</span> { <span class="ident">fields</span>: <span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>] }
    }
    <span class="comment">// Even a getter must start with `&amp;mut self` and not `&amp;self`.</span>
    <span class="kw">fn</span> <span class="ident">get_field</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>, <span class="ident">index</span>: <span class="ident">i64</span>) -&gt; <span class="prelude-ty">Result</span><span class="op">&lt;</span><span class="ident">i64</span>, <span class="ident">Box</span><span class="op">&lt;</span><span class="ident">EvalAltResult</span><span class="op">&gt;</span><span class="op">&gt;</span> {
        <span class="prelude-val">Ok</span>(<span class="self">self</span>.<span class="ident">fields</span>[<span class="ident">index</span> <span class="kw">as</span> <span class="ident">usize</span>])
    }
}

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register API for the custom type.</span>
<span class="ident">engine</span>.<span class="ident">register_type</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>();

<span class="ident">engine</span>
    .<span class="ident">register_fn</span>(<span class="string">&quot;new_ts&quot;</span>, <span class="ident">TestStruct::new</span>)
    <span class="comment">// Register an indexer.</span>
    .<span class="ident">register_indexer_get_result</span>(<span class="ident">TestStruct::get_field</span>);

<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;let a = new_ts(); a[2]&quot;</span>)<span class="question-mark">?</span>, <span class="number">3</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_indexer_set" class="method has-srclink"><a href="#method.register_indexer_set" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_indexer_set" class="fnname">register_indexer_set</a>&lt;T, X, V&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;set_fn: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.reference.html">&amp;mut </a>T, X, V) + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;X: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;V: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register an index setter for a custom type with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<p>Not available under both <code>no_index</code> and <code>no_object</code>.</p>
<h5 id="panics-3"><a href="#panics-3">Panics</a></h5>
<p>Panics if the type is <a href="type.Array.html" title="crate::Array"><code>Array</code></a>, <a href="type.Map.html" title="crate::Map"><code>Map</code></a>, <a href="https://doc.rust-lang.org/1.60.0/alloc/string/struct.String.html" title="String"><code>String</code></a>,
<a href="plugin/struct.ImmutableString.html" title="crate::ImmutableString"><code>ImmutableString</code></a>, <code>&amp;str</code> or <a href="type.INT.html" title="crate::INT"><code>INT</code></a>.
Indexers for arrays, object maps, strings and integers cannot be registered.</p>
<h5 id="example-28"><a href="#example-28">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Clone</span>)]</span>
<span class="kw">struct</span> <span class="ident">TestStruct</span> {
    <span class="ident">fields</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>
}

<span class="kw">impl</span> <span class="ident">TestStruct</span> {
    <span class="kw">fn</span> <span class="ident">new</span>() -&gt; <span class="self">Self</span> {
        <span class="self">Self</span> { <span class="ident">fields</span>: <span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>] }
    }
    <span class="kw">fn</span> <span class="ident">set_field</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>, <span class="ident">index</span>: <span class="ident">i64</span>, <span class="ident">value</span>: <span class="ident">i64</span>) {
        <span class="self">self</span>.<span class="ident">fields</span>[<span class="ident">index</span> <span class="kw">as</span> <span class="ident">usize</span>] <span class="op">=</span> <span class="ident">value</span>;
    }
}

<span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register API for the custom type.</span>
<span class="ident">engine</span>.<span class="ident">register_type</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>();

<span class="ident">engine</span>
    .<span class="ident">register_fn</span>(<span class="string">&quot;new_ts&quot;</span>, <span class="ident">TestStruct::new</span>)
    <span class="comment">// Register an indexer.</span>
    .<span class="ident">register_indexer_set</span>(<span class="ident">TestStruct::set_field</span>);

<span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>(<span class="string">&quot;let a = new_ts(); a[2] = 42; a&quot;</span>)<span class="question-mark">?</span>;

<span class="macro">assert_eq!</span>(<span class="ident">result</span>.<span class="ident">fields</span>[<span class="number">2</span>], <span class="number">42</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_indexer_set_result" class="method has-srclink"><a href="#method.register_indexer_set_result" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_indexer_set_result" class="fnname">register_indexer_set_result</a>&lt;T, X, V&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;set_fn: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.reference.html">&amp;mut </a>T, X, V) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;X: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;V: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register an index setter for a custom type with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<p>Not available under both <code>no_index</code> and <code>no_object</code>.</p>
<h5 id="panics-4"><a href="#panics-4">Panics</a></h5>
<p>Panics if the type is <a href="type.Array.html" title="crate::Array"><code>Array</code></a>, <a href="type.Map.html" title="crate::Map"><code>Map</code></a>, <a href="https://doc.rust-lang.org/1.60.0/alloc/string/struct.String.html" title="String"><code>String</code></a>,
<a href="plugin/struct.ImmutableString.html" title="crate::ImmutableString"><code>ImmutableString</code></a>, <code>&amp;str</code> or <a href="type.INT.html" title="crate::INT"><code>INT</code></a>.
Indexers for arrays, object maps, strings and integers cannot be registered.</p>
<h5 id="example-29"><a href="#example-29">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai</span>::{<span class="ident">Engine</span>, <span class="ident">Dynamic</span>, <span class="ident">EvalAltResult</span>};

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Clone</span>)]</span>
<span class="kw">struct</span> <span class="ident">TestStruct</span> {
    <span class="ident">fields</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>
}

<span class="kw">impl</span> <span class="ident">TestStruct</span> {
    <span class="kw">fn</span> <span class="ident">new</span>() -&gt; <span class="self">Self</span> {
        <span class="self">Self</span> { <span class="ident">fields</span>: <span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>] }
    }
    <span class="kw">fn</span> <span class="ident">set_field</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>, <span class="ident">index</span>: <span class="ident">i64</span>, <span class="ident">value</span>: <span class="ident">i64</span>) -&gt; <span class="prelude-ty">Result</span><span class="op">&lt;</span>(), <span class="ident">Box</span><span class="op">&lt;</span><span class="ident">rhai::EvalAltResult</span><span class="op">&gt;</span><span class="op">&gt;</span> {
        <span class="self">self</span>.<span class="ident">fields</span>[<span class="ident">index</span> <span class="kw">as</span> <span class="ident">usize</span>] <span class="op">=</span> <span class="ident">value</span>;
        <span class="prelude-val">Ok</span>(())
    }
}

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register API for the custom type.</span>
<span class="ident">engine</span>.<span class="ident">register_type</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>();

<span class="ident">engine</span>
    .<span class="ident">register_fn</span>(<span class="string">&quot;new_ts&quot;</span>, <span class="ident">TestStruct::new</span>)
    <span class="comment">// Register an indexer.</span>
    .<span class="ident">register_indexer_set_result</span>(<span class="ident">TestStruct::set_field</span>);

<span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>(<span class="string">&quot;let a = new_ts(); a[2] = 42; a&quot;</span>)<span class="question-mark">?</span>;

<span class="macro">assert_eq!</span>(<span class="ident">result</span>.<span class="ident">fields</span>[<span class="number">2</span>], <span class="number">42</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_indexer_get_set" class="method has-srclink"><a href="#method.register_indexer_get_set" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_indexer_get_set" class="fnname">register_indexer_get_set</a>&lt;T, X, V&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;get_fn: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.reference.html">&amp;mut </a>T, X) -&gt; V + SendSync + 'static, <br>&nbsp;&nbsp;&nbsp;&nbsp;set_fn: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.reference.html">&amp;mut </a>T, X, V) + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;X: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;V: Variant + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,&nbsp;</span></h4></section></summary><div class="docblock"><p>Short-hand for registering both index getter and setter functions for a custom type with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<p>Not available under both <code>no_index</code> and <code>no_object</code>.</p>
<h5 id="panics-5"><a href="#panics-5">Panics</a></h5>
<p>Panics if the type is <a href="type.Array.html" title="crate::Array"><code>Array</code></a>, <a href="type.Map.html" title="crate::Map"><code>Map</code></a>, <a href="https://doc.rust-lang.org/1.60.0/alloc/string/struct.String.html" title="String"><code>String</code></a>,
<a href="plugin/struct.ImmutableString.html" title="crate::ImmutableString"><code>ImmutableString</code></a>, <code>&amp;str</code> or <a href="type.INT.html" title="crate::INT"><code>INT</code></a>.
Indexers for arrays, object maps, strings and integers cannot be registered.</p>
<h5 id="example-30"><a href="#example-30">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Clone</span>)]</span>
<span class="kw">struct</span> <span class="ident">TestStruct</span> {
    <span class="ident">fields</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>
}

<span class="kw">impl</span> <span class="ident">TestStruct</span> {
    <span class="kw">fn</span> <span class="ident">new</span>() -&gt; <span class="self">Self</span> {
        <span class="self">Self</span> { <span class="ident">fields</span>: <span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>] }
    }
    <span class="comment">// Even a getter must start with `&amp;mut self` and not `&amp;self`.</span>
    <span class="kw">fn</span> <span class="ident">get_field</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>, <span class="ident">index</span>: <span class="ident">i64</span>) -&gt; <span class="ident">i64</span> {
        <span class="self">self</span>.<span class="ident">fields</span>[<span class="ident">index</span> <span class="kw">as</span> <span class="ident">usize</span>]
    }
    <span class="kw">fn</span> <span class="ident">set_field</span>(<span class="kw-2">&amp;mut</span> <span class="self">self</span>, <span class="ident">index</span>: <span class="ident">i64</span>, <span class="ident">value</span>: <span class="ident">i64</span>) {
        <span class="self">self</span>.<span class="ident">fields</span>[<span class="ident">index</span> <span class="kw">as</span> <span class="ident">usize</span>] <span class="op">=</span> <span class="ident">value</span>;
    }
}

<span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register API for the custom type.</span>
<span class="ident">engine</span>.<span class="ident">register_type</span>::<span class="op">&lt;</span><span class="ident">TestStruct</span><span class="op">&gt;</span>();

<span class="ident">engine</span>
    .<span class="ident">register_fn</span>(<span class="string">&quot;new_ts&quot;</span>, <span class="ident">TestStruct::new</span>)
    <span class="comment">// Register an indexer.</span>
    .<span class="ident">register_indexer_get_set</span>(<span class="ident">TestStruct::get_field</span>, <span class="ident">TestStruct::set_field</span>);

<span class="macro">assert_eq!</span>(<span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;let a = new_ts(); a[2] = 42; a[2]&quot;</span>)<span class="question-mark">?</span>, <span class="number">42</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_global_module" class="method has-srclink"><a href="#method.register_global_module" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_global_module" class="fnname">register_global_module</a>(&amp;mut self, module: <a class="struct" href="struct.Shared.html" title="struct casbin::rhai::Shared">Arc</a>&lt;<a class="struct" href="plugin/struct.Module.html" title="struct casbin::rhai::plugin::Module">Module</a>&gt;) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h4></section></summary><div class="docblock"><p>Register a shared <a href="plugin/struct.Module.html" title="Module"><code>Module</code></a> into the global namespace of <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<p>All functions and type iterators are automatically available to scripts without namespace
qualifications.</p>
<p>Sub-modules and variables are <strong>ignored</strong>.</p>
<p>When searching for functions, modules loaded later are preferred. In other words, loaded
modules are searched in reverse order.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-7" class="impl has-srclink"><a href="#impl-7" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.allow_if_expression" class="method has-srclink"><a href="#method.allow_if_expression" class="anchor"></a><h4 class="code-header">pub const fn <a href="#method.allow_if_expression" class="fnname">allow_if_expression</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Is <code>if</code>-expression allowed?
Default is <code>true</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.set_allow_if_expression" class="method has-srclink"><a href="#method.set_allow_if_expression" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.set_allow_if_expression" class="fnname">set_allow_if_expression</a>(&amp;mut self, enable: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a>)</h4></section></summary><div class="docblock"><p>Set whether <code>if</code>-expression is allowed.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.allow_switch_expression" class="method has-srclink"><a href="#method.allow_switch_expression" class="anchor"></a><h4 class="code-header">pub const fn <a href="#method.allow_switch_expression" class="fnname">allow_switch_expression</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Is <code>switch</code> expression allowed?
Default is <code>true</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.set_allow_switch_expression" class="method has-srclink"><a href="#method.set_allow_switch_expression" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.set_allow_switch_expression" class="fnname">set_allow_switch_expression</a>(&amp;mut self, enable: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a>)</h4></section></summary><div class="docblock"><p>Set whether <code>switch</code> expression is allowed.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.allow_statement_expression" class="method has-srclink"><a href="#method.allow_statement_expression" class="anchor"></a><h4 class="code-header">pub const fn <a href="#method.allow_statement_expression" class="fnname">allow_statement_expression</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Is statement-expression allowed?
Default is <code>true</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.set_allow_statement_expression" class="method has-srclink"><a href="#method.set_allow_statement_expression" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.set_allow_statement_expression" class="fnname">set_allow_statement_expression</a>(&amp;mut self, enable: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a>)</h4></section></summary><div class="docblock"><p>Set whether statement-expression is allowed.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.allow_looping" class="method has-srclink"><a href="#method.allow_looping" class="anchor"></a><h4 class="code-header">pub const fn <a href="#method.allow_looping" class="fnname">allow_looping</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Is looping allowed?
Default is <code>true</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.set_allow_looping" class="method has-srclink"><a href="#method.set_allow_looping" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.set_allow_looping" class="fnname">set_allow_looping</a>(&amp;mut self, enable: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a>)</h4></section></summary><div class="docblock"><p>Set whether looping is allowed.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.allow_shadowing" class="method has-srclink"><a href="#method.allow_shadowing" class="anchor"></a><h4 class="code-header">pub const fn <a href="#method.allow_shadowing" class="fnname">allow_shadowing</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Is variables shadowing allowed?
Default is <code>true</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.set_allow_shadowing" class="method has-srclink"><a href="#method.set_allow_shadowing" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.set_allow_shadowing" class="fnname">set_allow_shadowing</a>(&amp;mut self, enable: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a>)</h4></section></summary><div class="docblock"><p>Set whether variables shadowing is allowed.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.strict_variables" class="method has-srclink"><a href="#method.strict_variables" class="anchor"></a><h4 class="code-header">pub const fn <a href="#method.strict_variables" class="fnname">strict_variables</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Is strict variables mode enabled?
Default is <code>false</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.set_strict_variables" class="method has-srclink"><a href="#method.set_strict_variables" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.set_strict_variables" class="fnname">set_strict_variables</a>(&amp;mut self, enable: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a>)</h4></section></summary><div class="docblock"><p>Set whether strict variables mode is enabled.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.fail_on_invalid_map_property" class="method has-srclink"><a href="#method.fail_on_invalid_map_property" class="anchor"></a><h4 class="code-header">pub const fn <a href="#method.fail_on_invalid_map_property" class="fnname">fail_on_invalid_map_property</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Raise error if an object map property does not exist?
Default is <code>false</code>.</p>
<p>Not available under <code>no_object</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.set_fail_on_invalid_map_property" class="method has-srclink"><a href="#method.set_fail_on_invalid_map_property" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.set_fail_on_invalid_map_property" class="fnname">set_fail_on_invalid_map_property</a>(&amp;mut self, enable: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a>)</h4></section></summary><div class="docblock"><p>Set whether to raise error if an object map property does not exist.</p>
<p>Not available under <code>no_object</code>.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-8" class="impl has-srclink"><a href="#impl-8" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.on_var" class="method has-srclink"><a href="#method.on_var" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.on_var" class="fnname">on_var</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;callback: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>, <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.usize.html">usize</a>, <a class="struct" href="struct.EvalContext.html" title="struct casbin::rhai::EvalContext">EvalContext</a>&lt;'_, '_, '_, '_, '_, '_, '_, '_&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.60.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="plugin/struct.Dynamic.html" title="struct casbin::rhai::plugin::Dynamic">Dynamic</a>&gt;, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h4></section><div class="item-info"><div class="stab deprecated"><span class="emoji">👎</span> Deprecated: <p>This API is volatile and may change in the future.</p>
</div></div></summary><div class="docblock"><p>Provide a callback that will be invoked before each variable access.</p>
<h5 id="warning---unstable-api"><a href="#warning---unstable-api">WARNING - Unstable API</a></h5>
<p>This API is volatile and may change in the future.</p>
<h5 id="callback-function-signature"><a href="#callback-function-signature">Callback Function Signature</a></h5>
<p><code>Fn(name: &amp;str, index: usize, context: EvalContext) -&gt; Result&lt;Option&lt;Dynamic&gt;, Box&lt;EvalAltResult&gt;&gt;</code></p>
<p>where:</p>
<ul>
<li><code>name</code>: name of the variable.</li>
<li><code>index</code>: an offset from the bottom of the current <a href="struct.Scope.html" title="crate::Scope"><code>Scope</code></a> that the
variable is supposed to reside. Offsets start from 1, with 1 meaning the last variable in
the current <a href="struct.Scope.html" title="crate::Scope"><code>Scope</code></a>.  Essentially the correct variable is at position
<code>scope.len() - index</code>. If <code>index</code> is zero, then there is no pre-calculated offset position
and a search through the current <a href="struct.Scope.html" title="crate::Scope"><code>Scope</code></a> must be performed.</li>
<li><code>context</code>: the current <a href="struct.EvalContext.html" title="EvalContext">evaluation context</a>.</li>
</ul>
<h6 id="return-value"><a href="#return-value">Return value</a></h6>
<ul>
<li><code>Ok(None)</code>: continue with normal variable access.</li>
<li><code>Ok(Some(Dynamic))</code>: the variable’s value.</li>
</ul>
<h6 id="raising-errors"><a href="#raising-errors">Raising errors</a></h6>
<p>Return <code>Err(...)</code> if there is an error.</p>
<h5 id="example-31"><a href="#example-31">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register a variable resolver.</span>
<span class="ident">engine</span>.<span class="ident">on_var</span>(<span class="op">|</span><span class="ident">name</span>, <span class="kw">_</span>, <span class="kw">_</span><span class="op">|</span> {
    <span class="kw">match</span> <span class="ident">name</span> {
        <span class="string">&quot;MYSTIC_NUMBER&quot;</span> =&gt; <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="number">42_i64</span>.<span class="ident">into</span>())),
        <span class="kw">_</span> =&gt; <span class="prelude-val">Ok</span>(<span class="prelude-val">None</span>)
    }
});

<span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;MYSTIC_NUMBER&quot;</span>)<span class="question-mark">?</span>;
</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.on_def_var" class="method has-srclink"><a href="#method.on_def_var" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.on_def_var" class="fnname">on_def_var</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;callback: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a>, <a class="struct" href="struct.VarDefInfo.html" title="struct casbin::rhai::VarDefInfo">VarDefInfo</a>&lt;'_&gt;, <a class="struct" href="struct.EvalContext.html" title="struct casbin::rhai::EvalContext">EvalContext</a>&lt;'_, '_, '_, '_, '_, '_, '_, '_&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h4></section><div class="item-info"><div class="stab deprecated"><span class="emoji">👎</span> Deprecated: <p>This API is volatile and may change in the future.</p>
</div></div></summary><div class="docblock"><p>Provide a callback that will be invoked before the definition of each variable .</p>
<h5 id="warning---unstable-api-1"><a href="#warning---unstable-api-1">WARNING - Unstable API</a></h5>
<p>This API is volatile and may change in the future.</p>
<h5 id="callback-function-signature-1"><a href="#callback-function-signature-1">Callback Function Signature</a></h5>
<p><code>Fn(is_runtime: bool, info: VarInfo, context: EvalContext) -&gt; Result&lt;bool, Box&lt;EvalAltResult&gt;&gt;</code></p>
<p>where:</p>
<ul>
<li><code>is_runtime</code>: <code>true</code> if the variable definition event happens during runtime, <code>false</code> if during compilation.</li>
<li><code>info</code>: information on the variable.</li>
<li><code>context</code>: the current <a href="struct.EvalContext.html" title="EvalContext">evaluation context</a>.</li>
</ul>
<h6 id="return-value-1"><a href="#return-value-1">Return value</a></h6>
<ul>
<li><code>Ok(true)</code>: continue with normal variable definition.</li>
<li><code>Ok(false)</code>: deny the variable definition with an <a href="plugin/enum.EvalAltResult.html#variant.ErrorRuntime" title="crate::EvalAltResult::ErrorRuntime">runtime error</a>.</li>
</ul>
<h6 id="raising-errors-1"><a href="#raising-errors-1">Raising errors</a></h6>
<p>Return <code>Err(...)</code> if there is an error.</p>
<h5 id="example-32"><a href="#example-32">Example</a></h5>
<div class='information'><div class='tooltip should_panic'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered should_panic"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register a variable definition filter.</span>
<span class="ident">engine</span>.<span class="ident">on_def_var</span>(<span class="op">|</span><span class="kw">_</span>, <span class="ident">info</span>, <span class="kw">_</span><span class="op">|</span> {
    <span class="comment">// Disallow defining MYSTIC_NUMBER as a constant</span>
    <span class="kw">if</span> <span class="ident">info</span>.<span class="ident">name</span> <span class="op">==</span> <span class="string">&quot;MYSTIC_NUMBER&quot;</span> <span class="op">&amp;&amp;</span> <span class="ident">info</span>.<span class="ident">is_const</span> {
        <span class="prelude-val">Ok</span>(<span class="bool-val">false</span>)
    } <span class="kw">else</span> {
        <span class="prelude-val">Ok</span>(<span class="bool-val">true</span>)
    }
});

<span class="comment">// The following runs fine:</span>
<span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;let MYSTIC_NUMBER = 42;&quot;</span>)<span class="question-mark">?</span>;

<span class="comment">// The following will cause an error:</span>
<span class="ident">engine</span>.<span class="ident">eval</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;const MYSTIC_NUMBER = 42;&quot;</span>)<span class="question-mark">?</span>;
</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.on_print" class="method has-srclink"><a href="#method.on_print" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.on_print" class="fnname">on_print</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;callback: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>) + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h4></section></summary><div class="docblock"><p>Override default action of <code>print</code> (print to stdout using <a href="https://doc.rust-lang.org/1.60.0/std/macro.println.html" title="println!"><code>println!</code></a>)</p>
<h5 id="example-33"><a href="#example-33">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">Arc::new</span>(<span class="ident">RwLock::new</span>(<span class="ident">String::new</span>()));

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Override action of &#39;print&#39; function</span>
<span class="kw">let</span> <span class="ident">logger</span> <span class="op">=</span> <span class="ident">result</span>.<span class="ident">clone</span>();
<span class="ident">engine</span>.<span class="ident">on_print</span>(<span class="kw">move</span> <span class="op">|</span><span class="ident">s</span><span class="op">|</span> <span class="ident">logger</span>.<span class="ident">write</span>().<span class="ident">unwrap</span>().<span class="ident">push_str</span>(<span class="ident">s</span>));

<span class="ident">engine</span>.<span class="ident">run</span>(<span class="string">&quot;print(40 + 2);&quot;</span>)<span class="question-mark">?</span>;

<span class="macro">assert_eq!</span>(<span class="kw-2">*</span><span class="ident">result</span>.<span class="ident">read</span>().<span class="ident">unwrap</span>(), <span class="string">&quot;42&quot;</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.on_debug" class="method has-srclink"><a href="#method.on_debug" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.on_debug" class="fnname">on_debug</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;callback: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>, <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt;, <a class="struct" href="plugin/struct.Position.html" title="struct casbin::rhai::plugin::Position">Position</a>) + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h4></section></summary><div class="docblock"><p>Override default action of <code>debug</code> (print to stdout using <a href="https://doc.rust-lang.org/1.60.0/std/macro.println.html" title="println!"><code>println!</code></a>)</p>
<h5 id="callback-function-signature-2"><a href="#callback-function-signature-2">Callback Function Signature</a></h5>
<p>The callback function signature passed takes the following form:</p>
<p><code>Fn(text: &amp;str, source: Option&lt;&amp;str&gt;, pos: Position)</code></p>
<p>where:</p>
<ul>
<li><code>text</code>: the text to display</li>
<li><code>source</code>: current source, if any</li>
<li><a href="plugin/struct.Position.html" title="Position"><code>pos</code></a>: location of the <code>debug</code> call</li>
</ul>
<h5 id="example-34"><a href="#example-34">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">Arc::new</span>(<span class="ident">RwLock::new</span>(<span class="ident">String::new</span>()));

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Override action of &#39;print&#39; function</span>
<span class="kw">let</span> <span class="ident">logger</span> <span class="op">=</span> <span class="ident">result</span>.<span class="ident">clone</span>();
<span class="ident">engine</span>.<span class="ident">on_debug</span>(<span class="kw">move</span> <span class="op">|</span><span class="ident">s</span>, <span class="ident">src</span>, <span class="ident">pos</span><span class="op">|</span> <span class="ident">logger</span>.<span class="ident">write</span>().<span class="ident">unwrap</span>().<span class="ident">push_str</span>(
                    <span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;{} @ {:?} &gt; {}&quot;</span>, <span class="ident">src</span>.<span class="ident">unwrap_or</span>(<span class="string">&quot;unknown&quot;</span>), <span class="ident">pos</span>, <span class="ident">s</span>)
               ));

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">ast</span> <span class="op">=</span> <span class="ident">engine</span>.<span class="ident">compile</span>(<span class="string">r#&quot;let x = &quot;hello&quot;; debug(x);&quot;#</span>)<span class="question-mark">?</span>;
<span class="ident">ast</span>.<span class="ident">set_source</span>(<span class="string">&quot;world&quot;</span>);
<span class="ident">engine</span>.<span class="ident">run_ast</span>(<span class="kw-2">&amp;</span><span class="ident">ast</span>)<span class="question-mark">?</span>;

<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">not</span>(<span class="ident">feature</span> <span class="op">=</span> <span class="string">&quot;no_position&quot;</span>))]</span>
<span class="macro">assert_eq!</span>(<span class="kw-2">*</span><span class="ident">result</span>.<span class="ident">read</span>().<span class="ident">unwrap</span>(), <span class="string">r#&quot;world @ 1:18 &gt; &quot;hello&quot;&quot;#</span>);
<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">feature</span> <span class="op">=</span> <span class="string">&quot;no_position&quot;</span>)]</span>
<span class="macro">assert_eq!</span>(<span class="kw-2">*</span><span class="ident">result</span>.<span class="ident">read</span>().<span class="ident">unwrap</span>(), <span class="string">r#&quot;world @ none &gt; &quot;hello&quot;&quot;#</span>);</code></pre></div>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-9" class="impl has-srclink"><a href="#impl-9" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_custom_syntax" class="method has-srclink"><a href="#method.register_custom_syntax" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_custom_syntax" class="fnname">register_custom_syntax</a>&lt;S&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;symbols: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">[</a>S<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">]</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope_may_be_changed: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;func: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;mut <a class="struct" href="struct.EvalContext.html" title="struct casbin::rhai::EvalContext">EvalContext</a>&lt;'_, '_, '_, '_, '_, '_, '_, '_&gt;, <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">&amp;[</a><a class="struct" href="struct.Expression.html" title="struct casbin::rhai::Expression">Expression</a>&lt;'_&gt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">]</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="plugin/struct.Dynamic.html" title="struct casbin::rhai::plugin::Dynamic">Dynamic</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; + SendSync + 'static<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;&amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a>, <a class="struct" href="struct.ParseError.html" title="struct casbin::rhai::ParseError">ParseError</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;SmartString&lt;LazyCompact&gt;&gt;,&nbsp;</span></h4></section></summary><div class="docblock"><p>Register a custom syntax with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<ul>
<li><code>symbols</code> holds a slice of strings that define the custom syntax.</li>
<li><code>scope_may_be_changed</code> specifies variables <em>may</em> be added/removed by this custom syntax.</li>
<li><code>func</code> is the implementation function.</li>
</ul>
<h6 id="note-on-symbols"><a href="#note-on-symbols">Note on <code>symbols</code></a></h6>
<ul>
<li>Whitespaces around symbols are stripped.</li>
<li>Symbols that are all-whitespace or empty are ignored.</li>
<li>If <code>symbols</code> does not contain at least one valid token, then the custom syntax registration
is simply ignored.</li>
</ul>
<h6 id="note-on-scope_may_be_changed"><a href="#note-on-scope_may_be_changed">Note on <code>scope_may_be_changed</code></a></h6>
<p>If <code>scope_may_be_changed</code> is <code>true</code>, then <em>size</em> of the current <a href="struct.Scope.html" title="crate::Scope"><code>Scope</code></a>
<em>may</em> be modified by this custom syntax.</p>
<p>Adding new variables and/or removing variables count.</p>
<p>Simply modifying the values of existing variables does NOT count, as the <em>size</em> of the
current <a href="struct.Scope.html" title="crate::Scope"><code>Scope</code></a> is unchanged, so <code>false</code> should be passed.</p>
<p>Replacing one variable with another (i.e. adding a new variable and removing one variable at
the same time so that the total <em>size</em> of the <a href="struct.Scope.html" title="crate::Scope"><code>Scope</code></a> is unchanged) also
does NOT count, so <code>false</code> should be passed.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_custom_syntax_raw" class="method has-srclink"><a href="#method.register_custom_syntax_raw" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_custom_syntax_raw" class="fnname">register_custom_syntax_raw</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;key: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;SmartString&lt;LazyCompact&gt;&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;parse: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">&amp;[</a><a class="struct" href="plugin/struct.ImmutableString.html" title="struct casbin::rhai::plugin::ImmutableString">ImmutableString</a><a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">]</a>, &amp;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.60.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="plugin/struct.ImmutableString.html" title="struct casbin::rhai::plugin::ImmutableString">ImmutableString</a>&gt;, <a class="struct" href="struct.ParseError.html" title="struct casbin::rhai::ParseError">ParseError</a>&gt; + SendSync + 'static, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope_may_be_changed: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.bool.html">bool</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;func: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(&amp;mut <a class="struct" href="struct.EvalContext.html" title="struct casbin::rhai::EvalContext">EvalContext</a>&lt;'_, '_, '_, '_, '_, '_, '_, '_&gt;, <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">&amp;[</a><a class="struct" href="struct.Expression.html" title="struct casbin::rhai::Expression">Expression</a>&lt;'_&gt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.slice.html">]</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="plugin/struct.Dynamic.html" title="struct casbin::rhai::plugin::Dynamic">Dynamic</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt; + SendSync + 'static<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h4></section></summary><div class="docblock"><p>Register a custom syntax with the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
<h5 id="warning---low-level-api-2"><a href="#warning---low-level-api-2">WARNING - Low Level API</a></h5>
<p>This function is very low level.</p>
<ul>
<li><code>scope_may_be_changed</code> specifies variables have been added/removed by this custom syntax.</li>
<li><code>parse</code> is the parsing function.</li>
<li><code>func</code> is the implementation function.</li>
</ul>
<p>All custom keywords used as symbols must be manually registered via <a href="plugin/struct.Engine.html#method.register_custom_operator" title="Engine::register_custom_operator"><code>Engine::register_custom_operator</code></a>.
Otherwise, they won’t be recognized.</p>
<h5 id="implementation-function-signature"><a href="#implementation-function-signature">Implementation Function Signature</a></h5>
<p>The implementation function has the following signature:</p>
<p><code>Fn(symbols: &amp;[ImmutableString], look_ahead: &amp;str) -&gt; Result&lt;Option&lt;ImmutableString&gt;, ParseError&gt;</code></p>
<p>where:</p>
<ul>
<li><code>symbols</code>: a slice of symbols that have been parsed so far, possibly containing <code>$expr$</code> and/or <code>$block$</code>;
<code>$ident$</code> and other literal markers are replaced by the actual text</li>
<li><code>look_ahead</code>: a string slice containing the next symbol that is about to be read</li>
</ul>
<h6 id="return-value-2"><a href="#return-value-2">Return value</a></h6>
<ul>
<li><code>Ok(None)</code>: parsing complete and there are no more symbols to match.</li>
<li><code>Ok(Some(symbol))</code>: the next symbol to match, which can also be <code>$expr$</code>, <code>$ident$</code> or <code>$block$</code>.</li>
<li><code>Err(ParseError)</code>: error that is reflected back to the <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>, normally <code>ParseError(ParseErrorType::BadInput(LexError::ImproperSymbol(message)), Position::NONE)</code> to indicate a syntax error, but it can be any <a href="struct.ParseError.html" title="crate::ParseError"><code>ParseError</code></a>.</li>
</ul>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-10" class="impl has-srclink"><a href="#impl-10" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.consume_file" class="method has-srclink"><a href="#method.consume_file" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.consume_file" class="fnname">consume_file</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;path: <a class="struct" href="https://doc.rust-lang.org/1.60.0/std/path/struct.PathBuf.html" title="struct std::path::PathBuf">PathBuf</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section><div class="item-info"><div class="stab deprecated"><span class="emoji">👎</span> Deprecated since 1.1.0: <p>use <code>run_file</code> instead</p>
</div></div></summary><div class="docblock"><p>Evaluate a file, but throw away the result and only return error (if any).
Useful for when you don’t need the result, but still need to keep track of possible errors.</p>
<p>Not available under <code>no_std</code> or <code>WASM</code>.</p>
<h5 id="deprecated"><a href="#deprecated">Deprecated</a></h5>
<p>This method is deprecated. Use <a href="plugin/struct.Engine.html#method.run_file" title="Engine::run_file"><code>run_file</code></a> instead.</p>
<p>This method will be removed in the next majocd cr version.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.consume_file_with_scope" class="method has-srclink"><a href="#method.consume_file_with_scope" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.consume_file_with_scope" class="fnname">consume_file_with_scope</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;mut <a class="struct" href="struct.Scope.html" title="struct casbin::rhai::Scope">Scope</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;path: <a class="struct" href="https://doc.rust-lang.org/1.60.0/std/path/struct.PathBuf.html" title="struct std::path::PathBuf">PathBuf</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section><div class="item-info"><div class="stab deprecated"><span class="emoji">👎</span> Deprecated since 1.1.0: <p>use <code>run_file_with_scope</code> instead</p>
</div></div></summary><div class="docblock"><p>Evaluate a file with own scope, but throw away the result and only return error (if any).
Useful for when you don’t need the result, but still need to keep track of possible errors.</p>
<p>Not available under <code>no_std</code> or <code>WASM</code>.</p>
<h5 id="deprecated-1"><a href="#deprecated-1">Deprecated</a></h5>
<p>This method is deprecated. Use <a href="plugin/struct.Engine.html#method.run_file_with_scope" title="Engine::run_file_with_scope"><code>run_file_with_scope</code></a> instead.</p>
<p>This method will be removed in the next major version.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.consume" class="method has-srclink"><a href="#method.consume" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.consume" class="fnname">consume</a>(&amp;self, script: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section><div class="item-info"><div class="stab deprecated"><span class="emoji">👎</span> Deprecated since 1.1.0: <p>use <code>run</code> instead</p>
</div></div></summary><div class="docblock"><p>Evaluate a string, but throw away the result and only return error (if any).
Useful for when you don’t need the result, but still need to keep track of possible errors.</p>
<h5 id="deprecated-2"><a href="#deprecated-2">Deprecated</a></h5>
<p>This method is deprecated. Use <a href="plugin/struct.Engine.html#method.run" title="Engine::run"><code>run</code></a> instead.</p>
<p>This method will be removed in the next major version.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.consume_with_scope" class="method has-srclink"><a href="#method.consume_with_scope" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.consume_with_scope" class="fnname">consume_with_scope</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;mut <a class="struct" href="struct.Scope.html" title="struct casbin::rhai::Scope">Scope</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;script: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section><div class="item-info"><div class="stab deprecated"><span class="emoji">👎</span> Deprecated since 1.1.0: <p>use <code>run_with_scope</code> instead</p>
</div></div></summary><div class="docblock"><p>Evaluate a string with own scope, but throw away the result and only return error (if any).
Useful for when you don’t need the result, but still need to keep track of possible errors.</p>
<h5 id="deprecated-3"><a href="#deprecated-3">Deprecated</a></h5>
<p>This method is deprecated. Use <a href="plugin/struct.Engine.html#method.run_with_scope" title="Engine::run_with_scope"><code>run_with_scope</code></a> instead.</p>
<p>This method will be removed in the next major version.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.consume_ast" class="method has-srclink"><a href="#method.consume_ast" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.consume_ast" class="fnname">consume_ast</a>(&amp;self, ast: &amp;<a class="struct" href="struct.AST.html" title="struct casbin::rhai::AST">AST</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section><div class="item-info"><div class="stab deprecated"><span class="emoji">👎</span> Deprecated since 1.1.0: <p>use <code>run_ast</code> instead</p>
</div></div></summary><div class="docblock"><p>Evaluate an <a href="struct.AST.html" title="AST"><code>AST</code></a>, but throw away the result and only return error (if any).
Useful for when you don’t need the result, but still need to keep track of possible errors.</p>
<h5 id="deprecated-4"><a href="#deprecated-4">Deprecated</a></h5>
<p>This method is deprecated. Use <a href="plugin/struct.Engine.html#method.run_ast" title="Engine::run_ast"><code>run_ast</code></a> instead.</p>
<p>This method will be removed in the next major version.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.consume_ast_with_scope" class="method has-srclink"><a href="#method.consume_ast_with_scope" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.consume_ast_with_scope" class="fnname">consume_ast_with_scope</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;scope: &amp;mut <a class="struct" href="struct.Scope.html" title="struct casbin::rhai::Scope">Scope</a>&lt;'_&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;ast: &amp;<a class="struct" href="struct.AST.html" title="struct casbin::rhai::AST">AST</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="enum" href="plugin/enum.EvalAltResult.html" title="enum casbin::rhai::plugin::EvalAltResult">EvalAltResult</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/alloc/struct.Global.html" title="struct alloc::alloc::Global">Global</a>&gt;&gt;</h4></section><div class="item-info"><div class="stab deprecated"><span class="emoji">👎</span> Deprecated since 1.1.0: <p>use <code>run_ast_with_scope</code> instead</p>
</div></div></summary><div class="docblock"><p>Evaluate an <a href="struct.AST.html" title="AST"><code>AST</code></a> with own scope, but throw away the result and only return error (if any).
Useful for when you don’t need the result, but still need to keep track of possible errors.</p>
<h5 id="deprecated-5"><a href="#deprecated-5">Deprecated</a></h5>
<p>This method is deprecated. Use <a href="plugin/struct.Engine.html#method.run_ast_with_scope" title="Engine::run_ast_with_scope"><code>run_ast_with_scope</code></a> instead.</p>
<p>This method will be removed in the next major version.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-11" class="impl has-srclink"><a href="#impl-11" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.disable_symbol" class="method has-srclink"><a href="#method.disable_symbol" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.disable_symbol" class="fnname">disable_symbol</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;symbol: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;SmartString&lt;LazyCompact&gt;&gt;<br>) -&gt; &amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h4></section></summary><div class="docblock"><p>Disable a particular keyword or operator in the language.</p>
<h5 id="examples"><a href="#examples">Examples</a></h5>
<p>The following will raise an error during parsing because the <code>if</code> keyword is disabled and is
recognized as a reserved symbol!</p>

<div class='information'><div class='tooltip should_panic'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered should_panic"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="ident">engine</span>.<span class="ident">disable_symbol</span>(<span class="string">&quot;if&quot;</span>);    <span class="comment">// disable the &#39;if&#39; keyword</span>

<span class="ident">engine</span>.<span class="ident">compile</span>(<span class="string">&quot;let x = if true { 42 } else { 0 };&quot;</span>)<span class="question-mark">?</span>;
<span class="comment">//                      ^ &#39;if&#39; is rejected as a reserved symbol</span></code></pre></div>
<p>The following will raise an error during parsing because the <code>+=</code> operator is disabled.</p>

<div class='information'><div class='tooltip should_panic'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered should_panic"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="ident">engine</span>.<span class="ident">disable_symbol</span>(<span class="string">&quot;+=&quot;</span>);    <span class="comment">// disable the &#39;+=&#39; operator</span>

<span class="ident">engine</span>.<span class="ident">compile</span>(<span class="string">&quot;let x = 42; x += 1;&quot;</span>)<span class="question-mark">?</span>;
<span class="comment">//                            ^ unknown operator</span></code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.register_custom_operator" class="method has-srclink"><a href="#method.register_custom_operator" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.register_custom_operator" class="fnname">register_custom_operator</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;keyword: impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.str.html">str</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;precedence: <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.u8.html">u8</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;&amp;mut <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;</h4></section></summary><div class="docblock"><p>Register a custom operator with a precedence into the language.</p>
<p>The operator can be a valid identifier, a reserved symbol, a disabled operator or a disabled keyword.</p>
<p>The precedence cannot be zero.</p>
<h5 id="example-35"><a href="#example-35">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">rhai::Engine</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">engine</span> <span class="op">=</span> <span class="ident">Engine::new</span>();

<span class="comment">// Register a custom operator called &#39;#&#39; and give it</span>
<span class="comment">// a precedence of 160 (i.e. between +|- and *|/).</span>
<span class="ident">engine</span>.<span class="ident">register_custom_operator</span>(<span class="string">&quot;#&quot;</span>, <span class="number">160</span>).<span class="ident">expect</span>(<span class="string">&quot;should succeed&quot;</span>);

<span class="comment">// Register a binary function named &#39;#&#39;</span>
<span class="ident">engine</span>.<span class="ident">register_fn</span>(<span class="string">&quot;#&quot;</span>, <span class="op">|</span><span class="ident">x</span>: <span class="ident">i64</span>, <span class="ident">y</span>: <span class="ident">i64</span><span class="op">|</span> (<span class="ident">x</span> <span class="op">*</span> <span class="ident">y</span>) <span class="op">-</span> (<span class="ident">x</span> <span class="op">+</span> <span class="ident">y</span>));

<span class="macro">assert_eq!</span>(
    <span class="ident">engine</span>.<span class="ident">eval_expression</span>::<span class="op">&lt;</span><span class="ident">i64</span><span class="op">&gt;</span>(<span class="string">&quot;1 + 2 * 3 # 4 - 5 / 6&quot;</span>)<span class="question-mark">?</span>,
    <span class="number">15</span>
);</code></pre></div>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-12" class="impl has-srclink"><a href="#impl-12" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.new" class="method has-srclink"><a href="#method.new" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.new" class="fnname">new</a>() -&gt; <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h4></section></summary><div class="docblock"><p>Create a new <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.new_raw" class="method has-srclink"><a href="#method.new_raw" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.new_raw" class="fnname">new_raw</a>() -&gt; <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h4></section></summary><div class="docblock"><p>Create a new <a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a> with minimal built-in functions.</p>
<p>Use <a href="plugin/struct.Engine.html#method.register_global_module" title="Engine::register_global_module"><code>register_global_module</code></a> to add packages of functions.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.const_empty_string" class="method has-srclink"><a href="#method.const_empty_string" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.const_empty_string" class="fnname">const_empty_string</a>(&amp;self) -&gt; <a class="struct" href="plugin/struct.ImmutableString.html" title="struct casbin::rhai::plugin::ImmutableString">ImmutableString</a></h4></section></summary><div class="docblock"><p>Get an empty <a href="plugin/struct.ImmutableString.html" title="ImmutableString"><code>ImmutableString</code></a>.</p>
<p><a href="plugin/struct.Engine.html" title="Engine"><code>Engine</code></a> keeps a single instance of an empty <a href="plugin/struct.ImmutableString.html" title="ImmutableString"><code>ImmutableString</code></a> and uses this to create
shared instances for subsequent uses. This minimizes unnecessary allocations for empty strings.</p>
</div></details></div></details><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor"></a></h2><div id="trait-implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Debug" class="impl has-srclink"><a href="#impl-Debug" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.fmt" class="method trait-impl has-srclink"><a href="#method.fmt" class="anchor"></a><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.60.0/core/fmt/trait.Debug.html#tymethod.fmt" class="fnname">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="https://doc.rust-lang.org/1.60.0/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.60.0/core/fmt/struct.Error.html" title="struct core::fmt::Error">Error</a>&gt;</h4></section></summary><div class='docblock'><p>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/1.60.0/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Default" class="impl has-srclink"><a href="#impl-Default" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a> for <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.default" class="method trait-impl has-srclink"><a href="#method.default" class="anchor"></a><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.60.0/core/default/trait.Default.html#tymethod.default" class="fnname">default</a>() -&gt; <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h4></section></summary><div class='docblock'><p>Returns the “default value” for a type. <a href="https://doc.rust-lang.org/1.60.0/core/default/trait.Default.html#tymethod.default">Read more</a></p>
</div></details></div></details></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor"></a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe" class="impl has-srclink"><a href="#impl-RefUnwindSafe" class="anchor"></a><h3 class="code-header in-band">impl !<a class="trait" href="https://doc.rust-lang.org/1.60.0/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section><section id="impl-Send" class="impl has-srclink"><a href="#impl-Send" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section><section id="impl-Sync" class="impl has-srclink"><a href="#impl-Sync" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section><section id="impl-Unpin" class="impl has-srclink"><a href="#impl-Unpin" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section><section id="impl-UnwindSafe" class="impl has-srclink"><a href="#impl-UnwindSafe" class="anchor"></a><h3 class="code-header in-band">impl !<a class="trait" href="https://doc.rust-lang.org/1.60.0/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="plugin/struct.Engine.html" title="struct casbin::rhai::plugin::Engine">Engine</a></h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor"></a></h2><div id="blanket-implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Any" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/core/any.rs.html#132-136">source</a></span><a href="#impl-Any" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/1.60.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/core/any.rs.html#133">source</a></span><a href="#method.type_id" class="anchor"></a><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.60.0/core/any/trait.Any.html#tymethod.type_id" class="fnname">type_id</a>(&amp;self) -&gt; <a class="struct" href="plugin/struct.TypeId.html" title="struct casbin::rhai::plugin::TypeId">TypeId</a></h4></section></summary><div class='docblock'><p>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/1.60.0/core/any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Borrow%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/core/borrow.rs.html#209-214">source</a></span><a href="#impl-Borrow%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/1.60.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/core/borrow.rs.html#211">source</a></span><a href="#method.borrow" class="anchor"></a><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.60.0/core/borrow/trait.Borrow.html#tymethod.borrow" class="fnname">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.reference.html">&amp;</a>T</h4></section></summary><div class='docblock'><p>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.60.0/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-BorrowMut%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/core/borrow.rs.html#218-222">source</a></span><a href="#impl-BorrowMut%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/1.60.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/core/borrow.rs.html#219">source</a></span><a href="#method.borrow_mut" class="anchor"></a><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.60.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fnname">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.60.0/std/primitive.reference.html">&amp;mut </a>T</h4></section></summary><div class='docblock'><p>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.60.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-From%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/core/convert/mod.rs.html#553-558">source</a></span><a href="#impl-From%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/core/convert/mod.rs.html#555">source</a></span><a href="#method.from" class="anchor"></a><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.60.0/core/convert/trait.From.html#tymethod.from" class="fnname">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Into%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/core/convert/mod.rs.html#537-548">source</a></span><a href="#impl-Into%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/core/convert/mod.rs.html#545">source</a></span><a href="#method.into" class="anchor"></a><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.60.0/core/convert/trait.Into.html#tymethod.into" class="fnname">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/1.60.0/core/convert/trait.From.html" title="From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-TryFrom%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/core/convert/mod.rs.html#594-603">source</a></span><a href="#impl-TryFrom%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error" class="type trait-impl has-srclink"><a href="#associatedtype.Error" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.60.0/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/core/convert/mod.rs.html#600">source</a></span><a href="#method.try_from" class="anchor"></a><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.60.0/core/convert/trait.TryFrom.html#tymethod.try_from" class="fnname">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'><p>Performs the conversion.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-TryInto%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/core/convert/mod.rs.html#579-588">source</a></span><a href="#impl-TryInto%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error-1" class="type trait-impl has-srclink"><a href="#associatedtype.Error-1" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.60.0/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.60.0/src/core/convert/mod.rs.html#585">source</a></span><a href="#method.try_into" class="anchor"></a><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.60.0/core/convert/trait.TryInto.html#tymethod.try_into" class="fnname">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.60.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.60.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'><p>Performs the conversion.</p>
</div></details></div></details></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="casbin" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.60.0 (7737e0b5c 2022-04-04)" ></div>
</body></html>